{"version":3,"sources":["webpack:///application.js","webpack:///webpack/bootstrap 78d3052e8f70edb5e0d7","webpack:///./src/Component.ts","webpack:///./src/mainApp/MinimalGallery/_actions/index.ts","webpack:///external \"dojo/io-query\"","webpack:///./src/mainApp/MinimalGallery/_utilities/supportedItemTypes.ts","webpack:///./src/mainApp/MinimalGallery/Gallery/Panel/_actions/index.ts","webpack:///external \"dojo/promise/all\"","webpack:///./src/mainApp/MinimalGallery/Viewer/View/ViewBase/index.tsx","webpack:///./src/mainApp/index.ts","webpack:///external \"esriApplicationBase/ApplicationBase\"","webpack:///./src/mainApp/Widget.tsx","webpack:///external \"esri/core/accessorSupport/decorators\"","webpack:///external \"esri/widgets/Widget\"","webpack:///./src/mainApp/MinimalGallery/index.tsx","webpack:///external \"esri/widgets/support/widget\"","webpack:///./src/mainApp/MinimalGallery/_actions/base.ts","webpack:///external \"dojo/Deferred\"","webpack:///./src/mainApp/MinimalGallery/_actions/items.ts","webpack:///./src/mainApp/MinimalGallery/_actions/router.ts","webpack:///./src/mainApp/MinimalGallery/Header.tsx","webpack:///./src/mainApp/MinimalGallery/Gallery/index.tsx","webpack:///./src/mainApp/MinimalGallery/Gallery/Panel/index.tsx","webpack:///./src/mainApp/MinimalGallery/Gallery/Panel/Caption.tsx","webpack:///./src/mainApp/MinimalGallery/Gallery/Panel/_reducers/index.ts","webpack:///./src/mainApp/MinimalGallery/Viewer/index.tsx","webpack:///./src/mainApp/MinimalGallery/Viewer/View/index.tsx","webpack:///./src/mainApp/MinimalGallery/Viewer/View/MapView.tsx","webpack:///./src/mainApp/MinimalGallery/Viewer/View/ViewBase/_reducers/index.ts","webpack:///external \"esri/core/promiseUtils\"","webpack:///external \"esri/core/requireUtils\"","webpack:///./src/mainApp/MinimalGallery/Viewer/View/AppView.tsx","webpack:///./src/mainApp/MinimalGallery/Viewer/View/SceneView.tsx","webpack:///./src/mainApp/MinimalGallery/_utilities/convertHex.ts","webpack:///./src/mainApp/MinimalGallery/Pager.tsx","webpack:///./src/mainApp/MinimalGallery/_reducers/index.ts","webpack:///./src/mainApp/MinimalGallery/_reducers/base.ts","webpack:///./src/mainApp/MinimalGallery/_reducers/items.ts","webpack:///./src/mainApp/MinimalGallery/_reducers/router.ts","webpack:///./src/mainApp/MinimalGallery/_reducers/filter.ts","webpack:///./src/mainApp/MinimalGallery/_reducers/page.ts","webpack:///./src/mainApp/MinimalGallery/_reducers/viewer.ts","webpack:///./src/mainApp/MinimalGallery/_utilities/router.ts"],"names":["define","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_9__","__WEBPACK_EXTERNAL_MODULE_11__","__WEBPACK_EXTERNAL_MODULE_12__","__WEBPACK_EXTERNAL_MODULE_14__","__WEBPACK_EXTERNAL_MODULE_16__","__WEBPACK_EXTERNAL_MODULE_28__","__WEBPACK_EXTERNAL_MODULE_29__","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","newStore","storeParams","middlewares","applyMiddleware","apply","createStore","reducers","parentWidget","initialState","combineReducers","finalReducers","pick","val","state","action","mapValues","reducer","key","subscribers","store","dispatch","forEach","handler","scheduleRender","subscribe","push","index","indexOf","splice","getState","type","_i","arguments","length","next","chain","map","middleware","compose","__assign","funcs","arg","reduceRight","composed","f","obj","fn","keys","reduce","result","this","assign","t","value","widget_1","Component","childComponents","dirty","props","tsx","bind","updateProps","element","properties","children","child","renderResult","render","Error","componentWillReceiveProps","nextProps","shouldComponentUpdate","setState","newState","default","thunk","params","debug","console","log","addListener","listener","base_1","SAVE_APP_BASE_RESULT","LOAD_APP_FAIL","LOAD_APP_PROGRESS","LOAD_APP_SUCCESS","loadApplicationBase","items_1","UPDATE_ITEMS","FILTER_ITEMS","filterItems","updateItems","router_1","PUSH","HASH_CHANGE","hashChange","fileTypes","360 VR Experience","App Builder Extension","Application","ArcGIS Pro Add In","ArcGIS Pro Configuration","ArcPad Package","CAD Drawing","CSV","CSV Collection","CityEngine Web Scene","Code Sample","Dashboard","Desktop Add In","Desktop Application","Desktop Application Template","Desktop Style","Document Link","Explorer Add In","Explorer Layer","Explorer Map","Feature Collection","Feature Service","File Geodatabase","GeoJson","Geocoding Service","Geodata Service","Geometry Service","Geoprocessing Package","Geoprocessing Sample","Geoprocessing Service","Globe Document","Globe Service","Image","Image Collection","Image Service","Insights Workbook","KML","KML Collection","Layer","Layer Package","Layout","Locator Package","Map Document","Map Package","Map Service","Map Template","Microsoft Excel","Microsoft Powerpoint","Microsoft Word","Mobile Application","Mobile Basemap Package","Mobile Map Package","Network Analysis Service","Operations Dashboard Add In","Operations Dashboard Extension","PDF","Pro Map","Project Package","Project Template","Published Map","Raster function template","Rule Package","Scene Document","Scene Package","Scene Service","Service Definition","Shapefile","Stream Service","Task File","Visio Document","WFS","WMS","WMTS","Windows Mobile Package","Windows Viewer Add In","Workflow Manager Service","iWork Keynote","iWork Numbers","iWork Pages","Form","Workforce Project","Web Map","Web Mapping Application","Web Scene","SHOW_IN_VIEWER","SHOW_FULLSCREEN","MOUSE_OVER","MOUSE_OUT","VIEWER_CHANGE","showInViewer","showFullscreen","mouseOver","mouseOut","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","__","constructor","create","Component_1","_reducers_1","all","promiseUtils","requireUtils","widgetKey","compassWidget","homeWidget","legendWidget","locateWidget","searchWidget","ViewBase","_super","_this","status","loadText","loadScripts","loadMap","loadWidgets","class","i18n","viewLoading","failed","when","window","webModule","viewModule","then","_a","WebConstructor","ViewConstructor","err","view","portalItem","id","load","basemap","allLayers","promises","layer","toArray","layers","container","containerId","otherwise","positions","bottom-left","bottom-right","top-left","top-right","widgets","position","item","constructors","Constructor","widget","activeLayerInfos","watch","ui","add","resolve","ApplicationBase","Widget_1","applicationConfigJSON","boilerplateConfigJSON","boilerplate","config","JSON","parse","settings","__decorate","decorators","target","desc","r","getOwnPropertyDescriptor","Reflect","decorate","decorators_1","Widget","MinimalGallery_1","MainApp","minimalGallery","base","applicationBase","applicationBaseResult","loadMessage","router","startHistoryListener","subclass","declared","_actions_1","Header_1","Gallery_1","Viewer_1","Pager_1","MinimalGallery","appLoading","showHeader","Deferred","_1","supportedItemTypes_1","queryGroupItems","loadAppFail","progress","loadAppProgress","saveAppBaseResult","fetchAllGroupItems","response","results","items","hash","filter","location","slice","loadAppSuccess","dfd","group","num","sortField","sortOrder","start","total","mappableArr","Math","floor","sortOtder","responses","allItems","concat","reject","payload","LOCATION_CHANGE","appendProtocol","Header","searchTerm","handleSearch","handleSearchChange","headSearch","headerSearch","role","title","onsubmit","searchPlaceholder","placeholder","style","oninput","tabletHeadSearch","headImage","headerImage","src","headerImageLocation","alt","headerText","agolLink","showAgolLink","href","agolLinkLocation","replace","headerTextColor","agolLinkText","headColor","headerTextURL","e","preventDefault","query","splitToPages","perPage","ioQuery","Panel_1","_actions_2","Gallery","itemsPerPage","itemPages","filteredItems","mapItemsToChildren","handleChildUpdate","viewer","fullscreen","displayKey","currentViewer","queryToObject","nextViewer","displayItems","page","url","portal","itemType","childState","itemId","hashParams","objectToQuery","Caption_1","Panel","panelType","getPanelType","handleMouseOver","handleMouseOut","handleItemKeyPress","handleItemClick","handleMaxKeyPress","handleMaxClick","registerItemLink","tooltipSnippet","author","showAuthor","owner","showSummaryTooltip","snippet","tooltipTruncLength","cardSnippet","summaryElement","showItemSummary","summaryTruncLength","itemPageLink","showItemPageLink","aria-label","itemExtTip","buttonBgColor","tabindex","xmlns","width","height","viewBox","maxLink","alwaysOpenFullscreen","onclick","onkeypress","mainTip","galleryTip","showItemTitle","linkColor","cardColor","afterCreate","onmouseover","onmouseout","thumbnailUrl","fontColor","activeViewer","itemLink","focus","open","openFullscreenSeparateTab","origin","pathname","search","convertHex","hex","opacity","parseInt","substring","Caption","captionBelowOpacity","captionOpacity","captionTransform","showItemType","itemTypeBelowThumbnail","captionTextColor","displayName","hovering","recognizedTypes","View_1","convertHex_1","Viewer","containerClasses","animate-fade-in","animate-fade-out","scrollY","handleExitKeyPress","handleExitClick","closeViewer","viewerItem","visible","viewType","MapView","SceneView","AppView","classes","bgColor","close","el","setTimeout","MapView_1","AppView_1","SceneView_1","ViewBase_1","iframe","Pager","handleNext","handlePrevious","handlePageButton","handlePage","pages","ceil","prevButtonClasses","btn","btn-disabled","btn-transparent","nextButtonClasses","btn-arrow","pageButtons","v","isActive","buttonTextColor","text","filter_1","page_1","viewer_1","isNaN","toLowerCase","tags","tag","description","hashParams_1","random","toString","onhashchange","event"],"mappings":"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","file":"application.js","sourcesContent":["define([\"dojo/io-query\",\"dojo/promise/all\",\"esriApplicationBase/ApplicationBase\",\"esri/core/accessorSupport/decorators\",\"esri/widgets/Widget\",\"esri/widgets/support/widget\",\"dojo/Deferred\",\"esri/core/promiseUtils\",\"esri/core/requireUtils\"], function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_29__) { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 7);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar widget_1 = __webpack_require__(14);\r\nvar Component = /** @class */ (function () {\r\n    function Component(store) {\r\n        /** Child components defined in this component's render function */\r\n        this.childComponents = {};\r\n        /** Indicates whether a component needs to re-render, or can simply return precalculated vdom */\r\n        this.dirty = true;\r\n        this.store = store;\r\n        this.props = store.getState();\r\n        this.tsx = this.tsx.bind(this);\r\n        this.updateProps = this.updateProps.bind(this);\r\n        store.subscribe(this.updateProps);\r\n    }\r\n    /** tsx function required to render child components */\r\n    Component.prototype.tsx = function (element, properties, children) {\r\n        if (typeof element === \"string\") {\r\n            return widget_1.tsx.apply(this, arguments);\r\n        }\r\n        else {\r\n            if (properties && properties.key) {\r\n                var child = this.childComponents[properties.key];\r\n                if (child) {\r\n                    if (child.dirty) {\r\n                        child.renderResult = child.render();\r\n                    }\r\n                    return child.renderResult;\r\n                }\r\n                else {\r\n                    this.childComponents[properties.key] = new element(properties.store ? newStore(__assign({}, properties.store, { parentWidget: this.store.parentWidget })) :\r\n                        this.store, properties.key);\r\n                    this.childComponents[properties.key].renderResult = this.childComponents[properties.key].render();\r\n                    return this.childComponents[properties.key].renderResult;\r\n                }\r\n            }\r\n            else {\r\n                throw new Error(\"Custom components must each have a unique key property.\");\r\n            }\r\n        }\r\n    };\r\n    /** Returns a VNode, needs to be implemented by component creator */\r\n    Component.prototype.render = function () { };\r\n    /** Called before a component's props are updated. */\r\n    Component.prototype.componentWillReceiveProps = function (nextProps) { };\r\n    /** Returns true by default. If false returned component will not re-render */\r\n    Component.prototype.shouldComponentUpdate = function (nextProps) {\r\n        return true;\r\n    };\r\n    /** Updates the private state of the component */\r\n    Component.prototype.setState = function (newState) {\r\n        this.state = __assign({}, this.state, newState);\r\n        this.store.parentWidget.scheduleRender();\r\n    };\r\n    /** Dispatches an action to the component's store */\r\n    Component.prototype.dispatch = function (action) {\r\n        this.store.dispatch(action);\r\n    };\r\n    /** Used behind the scenes to sync a component's props with the current application state */\r\n    Component.prototype.updateProps = function (nextProps) {\r\n        this.componentWillReceiveProps(nextProps);\r\n        this.dirty = this.shouldComponentUpdate(nextProps);\r\n        this.props = nextProps;\r\n    };\r\n    return Component;\r\n}());\r\nexports.default = Component;\r\n/** Creates a new store of application state */\r\nfunction newStore(storeParams) {\r\n    if (storeParams.middlewares) {\r\n        return applyMiddleware.apply(void 0, storeParams.middlewares)(createStore)(storeParams.reducers, storeParams.parentWidget, storeParams.initialState);\r\n    }\r\n    return createStore(storeParams.reducers, storeParams.parentWidget, storeParams.initialState);\r\n}\r\nexports.newStore = newStore;\r\n/** Combines reducers to allow composition */\r\nfunction combineReducers(reducers) {\r\n    var finalReducers = pick(reducers, function (val) { return typeof val === 'function'; });\r\n    return function (state, action) {\r\n        if (state === void 0) { state = {}; }\r\n        return mapValues(finalReducers, function (reducer, key) { return reducer(state[key], action); });\r\n    };\r\n}\r\nexports.combineReducers = combineReducers;\r\nfunction createStore(reducers, parentWidget, initialState) {\r\n    var state;\r\n    if (initialState) {\r\n        state = initialState;\r\n    }\r\n    var subscribers = [];\r\n    var store = {\r\n        parentWidget: parentWidget,\r\n        dispatch: function (action) {\r\n            state = reducers(state, action);\r\n            subscribers.forEach(function (handler) { return handler(state); });\r\n            parentWidget.scheduleRender();\r\n        },\r\n        subscribe: function (handler) {\r\n            subscribers.push(handler);\r\n            return function unsubscribe() {\r\n                var index = subscribers.indexOf(handler);\r\n                subscribers.splice(index, 1);\r\n            };\r\n        },\r\n        getState: function () {\r\n            return state;\r\n        }\r\n    };\r\n    store.dispatch({ type: \"INITIALIZE\" });\r\n    return store;\r\n}\r\nfunction applyMiddleware() {\r\n    var middlewares = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        middlewares[_i] = arguments[_i];\r\n    }\r\n    return function (next) { return function (reducer, parentWidget, initialState) {\r\n        var store = next(reducer, parentWidget, initialState);\r\n        var dispatch = store.dispatch;\r\n        var chain = [];\r\n        chain = middlewares.map(function (middleware) { return middleware({\r\n            getState: store.getState,\r\n            dispatch: function (action) { return dispatch(action); }\r\n        }); });\r\n        dispatch = compose.apply(void 0, chain)(store.dispatch);\r\n        return __assign({}, store, { dispatch: dispatch });\r\n    }; };\r\n}\r\nfunction compose() {\r\n    var funcs = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        funcs[_i] = arguments[_i];\r\n    }\r\n    return function (arg) { return funcs.reduceRight(function (composed, f) { return f(composed); }, arg); };\r\n}\r\nfunction mapValues(obj, fn) {\r\n    return Object.keys(obj).reduce(function (result, key) {\r\n        result[key] = fn(obj[key], key);\r\n        return result;\r\n    }, {});\r\n}\r\nfunction pick(obj, fn) {\r\n    return Object.keys(obj).reduce(function (result, key) {\r\n        if (fn(obj[key])) {\r\n            result[key] = obj[key];\r\n        }\r\n        return result;\r\n    }, {});\r\n}\r\n/** Available Redux middlewares */\r\nexports.middlewares = {\r\n    /** Asynchronous control flow using thunks */\r\n    thunk: function (params) { return function (next) { return function (action) {\r\n        if (typeof action === \"function\") {\r\n            return action(params.dispatch, params.getState);\r\n        }\r\n        return next(action);\r\n    }; }; },\r\n    /** Log dispatch and next state to the console */\r\n    debug: function (params) { return function (next) { return function (action) {\r\n        console.log(action.type, action);\r\n        var result = next(action);\r\n        console.log('next state', params.getState());\r\n        return result;\r\n    }; }; },\r\n    /** Send actions and resulting state to a listener */\r\n    addListener: function (listener) {\r\n        return function (params) { return function (next) { return function (action) {\r\n            var result = next(action);\r\n            listener(action, params.getState());\r\n            return result;\r\n        }; }; };\r\n    }\r\n};\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar base_1 = __webpack_require__(15);\r\nexports.SAVE_APP_BASE_RESULT = base_1.SAVE_APP_BASE_RESULT;\r\nexports.LOAD_APP_FAIL = base_1.LOAD_APP_FAIL;\r\nexports.LOAD_APP_PROGRESS = base_1.LOAD_APP_PROGRESS;\r\nexports.LOAD_APP_SUCCESS = base_1.LOAD_APP_SUCCESS;\r\nexports.loadApplicationBase = base_1.loadApplicationBase;\r\nvar items_1 = __webpack_require__(17);\r\nexports.UPDATE_ITEMS = items_1.UPDATE_ITEMS;\r\nexports.FILTER_ITEMS = items_1.FILTER_ITEMS;\r\nexports.filterItems = items_1.filterItems;\r\nexports.updateItems = items_1.updateItems;\r\nvar router_1 = __webpack_require__(18);\r\nexports.PUSH = router_1.PUSH;\r\nexports.HASH_CHANGE = router_1.HASH_CHANGE;\r\nexports.push = router_1.push;\r\nexports.hashChange = router_1.hashChange;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar fileTypes = {\r\n    \"360 VR Experience\": \"file\",\r\n    \"App Builder Extension\": \"file\",\r\n    \"Application\": \"file\",\r\n    \"ArcGIS Pro Add In\": \"file\",\r\n    \"ArcGIS Pro Configuration\": \"file\",\r\n    \"ArcPad Package\": \"file\",\r\n    \"CAD Drawing\": \"file\",\r\n    \"CSV\": \"file\",\r\n    \"CSV Collection\": \"file\",\r\n    \"CityEngine Web Scene\": \"file\",\r\n    \"Code Sample\": \"file\",\r\n    \"Dashboard\": \"file\",\r\n    \"Desktop Add In\": \"file\",\r\n    \"Desktop Application\": \"file\",\r\n    \"Desktop Application Template\": \"file\",\r\n    \"Desktop Style\": \"file\",\r\n    \"Document Link\": \"file\",\r\n    \"Explorer Add In\": \"file\",\r\n    \"Explorer Layer\": \"file\",\r\n    \"Explorer Map\": \"file\",\r\n    \"Feature Collection\": \"file\",\r\n    \"Feature Service\": \"file\",\r\n    \"File Geodatabase\": \"file\",\r\n    \"GeoJson\": \"file\",\r\n    \"Geocoding Service\": \"file\",\r\n    \"Geodata Service\": \"file\",\r\n    \"Geometry Service\": \"file\",\r\n    \"Geoprocessing Package\": \"file\",\r\n    \"Geoprocessing Sample\": \"file\",\r\n    \"Geoprocessing Service\": \"file\",\r\n    \"Globe Document\": \"file\",\r\n    \"Globe Service\": \"file\",\r\n    \"Image\": \"file\",\r\n    \"Image Collection\": \"file\",\r\n    \"Image Service\": \"file\",\r\n    \"Insights Workbook\": \"file\",\r\n    \"KML\": \"file\",\r\n    \"KML Collection\": \"file\",\r\n    \"Layer\": \"file\",\r\n    \"Layer Package\": \"file\",\r\n    \"Layout\": \"file\",\r\n    \"Locator Package\": \"file\",\r\n    \"Map Document\": \"file\",\r\n    \"Map Package\": \"file\",\r\n    \"Map Service\": \"file\",\r\n    \"Map Template\": \"file\",\r\n    \"Microsoft Excel\": \"file\",\r\n    \"Microsoft Powerpoint\": \"file\",\r\n    \"Microsoft Word\": \"file\",\r\n    \"Mobile Application\": \"file\",\r\n    \"Mobile Basemap Package\": \"file\",\r\n    \"Mobile Map Package\": \"file\",\r\n    \"Network Analysis Service\": \"file\",\r\n    \"Operations Dashboard Add In\": \"file\",\r\n    \"Operations Dashboard Extension\": \"file\",\r\n    \"PDF\": \"file\",\r\n    \"Pro Map\": \"file\",\r\n    \"Project Package\": \"file\",\r\n    \"Project Template\": \"file\",\r\n    \"Published Map\": \"file\",\r\n    \"Raster function template\": \"file\",\r\n    \"Rule Package\": \"file\",\r\n    \"Scene Document\": \"file\",\r\n    \"Scene Package\": \"file\",\r\n    \"Scene Service\": \"file\",\r\n    \"Service Definition\": \"file\",\r\n    \"Shapefile\": \"file\",\r\n    \"Stream Service\": \"file\",\r\n    \"Task File\": \"file\",\r\n    \"Visio Document\": \"file\",\r\n    \"WFS\": \"file\",\r\n    \"WMS\": \"file\",\r\n    \"WMTS\": \"file\",\r\n    \"Windows Mobile Package\": \"file\",\r\n    \"Windows Viewer Add In\": \"file\",\r\n    \"Workflow Manager Service\": \"file\",\r\n    \"iWork Keynote\": \"file\",\r\n    \"iWork Numbers\": \"file\",\r\n    \"iWork Pages\": \"file\",\r\n    \"Form\": \"file\",\r\n    \"Workforce Project\": \"file\"\r\n};\r\nexports.default = __assign({}, fileTypes, { \"Web Map\": \"webmap\", \"Web Mapping Application\": \"webapp\", \"Web Scene\": \"webscene\", \"Dashboard\": \"webapp\" });\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SHOW_IN_VIEWER = \"SHOW_IN_VIEWER\";\r\nexports.SHOW_FULLSCREEN = \"SHOW_FULLSCREEN\";\r\nexports.MOUSE_OVER = \"MOUSE_OVER\";\r\nexports.MOUSE_OUT = \"MOUSE_OUT\";\r\nexports.VIEWER_CHANGE = \"VIEWER_CHANGE\";\r\nexports.showInViewer = function () { return ({\r\n    type: exports.SHOW_IN_VIEWER\r\n}); };\r\nexports.showFullscreen = function () { return ({\r\n    type: exports.SHOW_FULLSCREEN\r\n}); };\r\nexports.mouseOver = function () { return ({\r\n    type: exports.MOUSE_OVER\r\n}); };\r\nexports.mouseOut = function () { return ({\r\n    type: exports.MOUSE_OUT\r\n}); };\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar _reducers_1 = __webpack_require__(27);\r\nexports.reducers = _reducers_1.reducers;\r\nvar all = __webpack_require__(5);\r\nvar promiseUtils = __webpack_require__(28);\r\nvar requireUtils = __webpack_require__(29);\r\nvar widgetKey = {\r\n    compassWidget: \"esri/widgets/Compass\",\r\n    homeWidget: \"esri/widgets/Home\",\r\n    legendWidget: \"esri/widgets/Legend\",\r\n    locateWidget: \"esri/widgets/Locate\",\r\n    searchWidget: \"esri/widgets/Search\"\r\n};\r\nvar ViewBase = /** @class */ (function (_super) {\r\n    __extends(ViewBase, _super);\r\n    function ViewBase(store) {\r\n        var _this = _super.call(this, store) || this;\r\n        _this.state = {\r\n            status: \"loading\",\r\n            loadText: \"scripts\"\r\n        };\r\n        _this.loadScripts = _this.loadScripts.bind(_this);\r\n        _this.loadMap = _this.loadMap.bind(_this);\r\n        _this.loadWidgets = _this.loadWidgets.bind(_this);\r\n        _this.loadScripts.bind(_this)();\r\n        return _this;\r\n    }\r\n    ViewBase.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        if (this.state.status === \"loaded\") {\r\n            return tsx(\"div\", null);\r\n        }\r\n        else if (this.state.status === \"loading\") {\r\n            return (tsx(\"div\", null,\r\n                tsx(\"div\", { class: \"loader is-active padding-leader-3 padding-trailer-3 center-style\" },\r\n                    tsx(\"div\", { class: \"loader-bars\" }),\r\n                    tsx(\"div\", { class: \"loader-text\" }, this.props.i18n.viewLoading[this.state.loadText]))));\r\n        }\r\n        return (tsx(\"div\", null,\r\n            tsx(\"h3\", { class: \"center-style\" }, this.props.i18n.viewLoading.failed)));\r\n    };\r\n    ViewBase.prototype.loadScripts = function () {\r\n        var _this = this;\r\n        requireUtils.when(window[\"require\"], [this.props.webModule, this.props.viewModule])\r\n            .then(function (_a) {\r\n            var WebConstructor = _a[0], ViewConstructor = _a[1];\r\n            _this.setState({ loadText: \"map\" });\r\n            _this.loadMap(WebConstructor, ViewConstructor);\r\n        }, function (err) {\r\n            _this.setState({ status: \"failed\" });\r\n        });\r\n    };\r\n    ViewBase.prototype.loadMap = function (WebConstructor, ViewConstructor) {\r\n        var _this = this;\r\n        var view;\r\n        var map = new WebConstructor({\r\n            portalItem: {\r\n                id: this.props.id\r\n            }\r\n        });\r\n        map.load().then(function () {\r\n            _this.setState({ loadText: \"basemap\" });\r\n            return map.basemap.load();\r\n        }).then(function () {\r\n            _this.setState({ loadText: \"layers\" });\r\n            var allLayers = map.allLayers;\r\n            var promises = allLayers.map(function (layer) { return layer.load(); });\r\n            return all(promises.toArray());\r\n        }).then(function (layers) {\r\n            _this.setState({ loadText: \"widgets\" });\r\n            view = new ViewConstructor({\r\n                container: _this.props.containerId,\r\n                map: map\r\n            });\r\n            return _this.loadWidgets(view);\r\n        }).then(function () {\r\n            view.container = _this.props.containerId;\r\n            _this.setState({ status: \"loaded\" });\r\n        }).otherwise(function (err) {\r\n            _this.setState({ status: \"failed\" });\r\n        });\r\n    };\r\n    ViewBase.prototype.loadWidgets = function (view) {\r\n        var _this = this;\r\n        var positions = {\r\n            \"bottom-left\": true,\r\n            \"bottom-right\": true,\r\n            \"top-left\": true,\r\n            \"top-right\": true\r\n        };\r\n        var modules = Object.keys(this.props.widgets).reduce(function (p, c, i) {\r\n            if (positions[_this.props.widgets[c]]) {\r\n                p.push({\r\n                    module: widgetKey[c],\r\n                    position: _this.props.widgets[c]\r\n                }); // typescript is weird\r\n            }\r\n            return p;\r\n        }, []);\r\n        return requireUtils.when(window[\"require\"], modules.map(function (item) { return item[\"module\"]; }))\r\n            .then(function (constructors) {\r\n            constructors.forEach(function (Constructor, i) {\r\n                var widget = new Constructor({ view: view });\r\n                if (widget.activeLayerInfos) {\r\n                    widget.watch(\"activeLayerInfos.length\", function () {\r\n                        view.ui.add(widget, modules[i][\"position\"]);\r\n                    });\r\n                    return;\r\n                }\r\n                view.ui.add(widget, modules[i][\"position\"]);\r\n            });\r\n            return promiseUtils.resolve();\r\n        });\r\n    };\r\n    return ViewBase;\r\n}(Component_1.default));\r\nexports.default = ViewBase;\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(8);\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ApplicationBase = __webpack_require__(9);\r\nvar Widget_1 = __webpack_require__(10);\r\nmodule.exports = function (applicationConfigJSON, boilerplateConfigJSON, i18n) {\r\n    var boilerplate = new ApplicationBase({\r\n        config: JSON.parse(applicationConfigJSON),\r\n        settings: JSON.parse(boilerplateConfigJSON)\r\n    });\r\n    var MainComponent = new Widget_1.default({ boilerplate: boilerplate, i18n: i18n });\r\n    MainComponent.container = \"viewDiv\";\r\n};\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/// <amd-dependency path=\"esri/core/tsSupport/declareExtendsHelper\" name=\"__extends\" />\r\n/// <amd-dependency path=\"esri/core/tsSupport/decorateHelper\" name=\"__decorate\" />\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar decorators_1 = __webpack_require__(11);\r\nvar Widget = __webpack_require__(12);\r\nvar MinimalGallery_1 = __webpack_require__(13);\r\nvar router_1 = __webpack_require__(41);\r\nvar Component_1 = __webpack_require__(0);\r\nvar thunk = Component_1.middlewares.thunk, debug = Component_1.middlewares.debug;\r\nvar MainApp = /** @class */ (function (_super) {\r\n    __extends(MainApp, _super);\r\n    function MainApp(props) {\r\n        var _this = _super.call(this) || this;\r\n        _this.minimalGallery = new MinimalGallery_1.default(Component_1.newStore({\r\n            reducers: MinimalGallery_1.reducers,\r\n            parentWidget: _this,\r\n            initialState: {\r\n                base: {\r\n                    applicationBase: props.boilerplate,\r\n                    applicationBaseResult: null,\r\n                    i18n: props.i18n,\r\n                    status: \"loading\",\r\n                    loadMessage: \"init\"\r\n                }\r\n            },\r\n            middlewares: [thunk, router_1.router]\r\n        }));\r\n        router_1.startHistoryListener(_this.minimalGallery.store);\r\n        return _this;\r\n    }\r\n    MainApp.prototype.render = function () {\r\n        return this.minimalGallery.render();\r\n    };\r\n    MainApp = __decorate([\r\n        decorators_1.subclass(\"esri.widgets.MinimalGallery\")\r\n    ], MainApp);\r\n    return MainApp;\r\n}(decorators_1.declared(Widget)));\r\nexports.default = MainApp;\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar _actions_1 = __webpack_require__(1);\r\nvar Header_1 = __webpack_require__(19);\r\nvar Gallery_1 = __webpack_require__(20);\r\nvar Viewer_1 = __webpack_require__(24);\r\nvar Pager_1 = __webpack_require__(33);\r\nvar _reducers_1 = __webpack_require__(34);\r\nexports.reducers = _reducers_1.reducers;\r\nvar MinimalGallery = /** @class */ (function (_super) {\r\n    __extends(MinimalGallery, _super);\r\n    function MinimalGallery(store) {\r\n        var _this = _super.call(this, store) || this;\r\n        _this.state = {\r\n            status: \"loading\",\r\n            loadMessage: \"init\"\r\n        };\r\n        _this.dispatch(_actions_1.loadApplicationBase());\r\n        return _this;\r\n    }\r\n    MinimalGallery.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        var i18n = this.props.base.i18n;\r\n        var status = this.props.base.status;\r\n        if (status === \"loading\") {\r\n            return (tsx(\"div\", null,\r\n                tsx(\"div\", { class: \"loader is-active padding-leader-3 padding-trailer-3 center-style\", key: \"loader\" },\r\n                    tsx(\"div\", { class: \"loader-bars\" }),\r\n                    tsx(\"div\", { bind: this, class: \"loader-text\" }, i18n.appLoading[this.state.loadMessage]))));\r\n        }\r\n        else if (status === \"success\") {\r\n            return (tsx(\"div\", null,\r\n                this.props.base.applicationBaseResult.config.showHeader ?\r\n                    tsx(Header_1.default, { key: \"minimal-gallery-header\" }) :\r\n                    null,\r\n                tsx(Gallery_1.default, { key: \"minimal-gallery\" }),\r\n                tsx(Viewer_1.default, { key: \"minimal-gallery-viewer\" }),\r\n                tsx(Pager_1.default, { key: \"minimal-gallery-pager\" })));\r\n        }\r\n        return (tsx(\"div\", null,\r\n            tsx(\"h3\", { class: \"center-style\" }, i18n.appLoading.failed)));\r\n    };\r\n    return MinimalGallery;\r\n}(Component_1.default));\r\nexports.default = MinimalGallery;\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_14__;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SAVE_APP_BASE_RESULT = \"SAVE_APP_BASE_RESULT\";\r\nexports.LOAD_APP_FAIL = \"LOAD_APP_FAIL\";\r\nexports.LOAD_APP_PROGRESS = \"LOAD_APP_PROGRESS\";\r\nexports.LOAD_APP_SUCCESS = \"LOAD_APP_FINISH\";\r\nvar all = __webpack_require__(5);\r\nvar Deferred = __webpack_require__(16);\r\nvar _1 = __webpack_require__(1);\r\nvar supportedItemTypes_1 = __webpack_require__(3);\r\nexports.loadApplicationBase = function () { return function (dispatch, getState) {\r\n    var base = getState().base;\r\n    base.applicationBase.load().then(function (result) { return dispatch(queryGroupItems(result)); }, function (err) { return dispatch(loadAppFail(err)); }, function (progress) { return dispatch(loadAppProgress(progress)); });\r\n}; };\r\nvar queryGroupItems = function (applicationBaseResult) {\r\n    return function (dispatch, getState) {\r\n        // Boilerplate loaded properly so save it\r\n        dispatch(saveAppBaseResult(applicationBaseResult));\r\n        var state = getState();\r\n        var applicationBase = state.base.applicationBase;\r\n        var config = applicationBaseResult.config;\r\n        fetchAllGroupItems(applicationBase, config).then(function (response) {\r\n            var promises = response.results.map(function (item) { return item.load(); });\r\n            all(promises).then(function (items) {\r\n                var hash = state.router.hash;\r\n                dispatch(_1.updateItems(items.filter(function (item) { return supportedItemTypes_1.default[item.type]; })));\r\n                dispatch(_1.hashChange(window.location.hash.slice(1)));\r\n                dispatch(loadAppSuccess());\r\n            }, function (err) { return dispatch(loadAppFail(err)); });\r\n        }, function (err) { return dispatch(loadAppFail(err)); });\r\n    };\r\n};\r\nvar fetchAllGroupItems = function (applicationBase, config) {\r\n    var dfd = new Deferred;\r\n    applicationBase.queryGroupItems(config.group, {\r\n        num: 100,\r\n        sortField: (config.sortField ? config.sortField : \"numviews\"),\r\n        sortOrder: (config.sortOrder ? config.sortOrder : \"desc\"),\r\n        start: 0\r\n    }).then(function (response) {\r\n        if (response.total > response.results.length) {\r\n            var mappableArr = Array.apply(null, { length: Math.floor(response.total / 100) });\r\n            var promises = mappableArr.map(function (c, i) { return (applicationBase.queryGroupItems(config.group, {\r\n                num: 100,\r\n                sortField: (config.sortField ? config.sortField : \"numviews\"),\r\n                sortOrder: (config.sortOtder ? config.sortOrder : \"desc\"),\r\n                start: 100 + (i * 100)\r\n            })); });\r\n            all(promises).then(function (responses) {\r\n                var allItems = responses.reduce(function (p, c) {\r\n                    p.results = p.results.concat(c.results);\r\n                    return p;\r\n                }, { results: response.results });\r\n                dfd.resolve(allItems);\r\n            }, function (err) {\r\n                dfd.reject(err);\r\n            });\r\n        }\r\n        else {\r\n            dfd.resolve(response);\r\n        }\r\n    }, function (err) {\r\n        dfd.reject(err);\r\n    });\r\n    return dfd;\r\n};\r\nvar saveAppBaseResult = function (applicationBaseResult) { return ({\r\n    type: exports.SAVE_APP_BASE_RESULT,\r\n    payload: applicationBaseResult\r\n}); };\r\nvar loadAppFail = function (err) { return ({\r\n    type: exports.LOAD_APP_FAIL,\r\n    payload: err\r\n}); };\r\nvar loadAppProgress = function (progress) { return ({\r\n    type: exports.LOAD_APP_PROGRESS,\r\n    payload: progress.status\r\n}); };\r\nvar loadAppSuccess = function () { return ({\r\n    type: exports.LOAD_APP_SUCCESS\r\n}); };\r\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UPDATE_ITEMS = \"UPDATE_ITEMS\";\r\nexports.FILTER_ITEMS = \"FILTER_ITEMS\";\r\nexports.updateItems = function (items) { return ({\r\n    type: exports.UPDATE_ITEMS,\r\n    payload: items\r\n}); };\r\nexports.filterItems = function (filter) { return ({\r\n    type: exports.FILTER_ITEMS,\r\n    payload: filter\r\n}); };\r\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PUSH = \"ROUTER/PUSH\";\r\nexports.LOCATION_CHANGE = \"ROUTER/LOCATION_CHANGE\";\r\nexports.HASH_CHANGE = \"ROUTER/HASH_CHANGE\";\r\nexports.push = function (hash) { return ({\r\n    type: exports.PUSH,\r\n    payload: hash,\r\n}); };\r\nexports.hashChange = function (hash) { return ({\r\n    type: exports.HASH_CHANGE,\r\n    payload: hash\r\n}); };\r\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar _actions_1 = __webpack_require__(1);\r\nvar Header = /** @class */ (function (_super) {\r\n    __extends(Header, _super);\r\n    function Header(store) {\r\n        var _this = _super.call(this, store) || this;\r\n        _this.state = {\r\n            searchTerm: _this.props.filter\r\n        };\r\n        _this.handleSearch = _this.handleSearch.bind(_this);\r\n        _this.handleSearchChange = _this.handleSearchChange.bind(_this);\r\n        return _this;\r\n    }\r\n    Header.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        var config = this.props.base.applicationBaseResult.config;\r\n        var headSearch = config.headerSearch ? (tsx(\"nav\", { class: \"class-top-nav-list right\", role: \"navigation\", title: \"usernav\" },\r\n            tsx(\"form\", { class: \"inline-block padding-leader-half\", role: \"search\", onsubmit: this.handleSearch },\r\n                tsx(\"input\", { title: config.searchPlaceholder, type: \"search\", placeholder: config.searchPlaceholder, name: \"q\", value: this.state.searchTerm, style: \"margin-top: -1px;\", oninput: this.handleSearchChange }),\r\n                tsx(\"button\", { type: \"submit\", class: \"hide\" }, config.searchPlaceholder)))) : null;\r\n        var tabletHeadSearch = config.headerSearch ? (tsx(\"nav\", { class: \"class-top-nav-list right\", role: \"navigation\", title: \"usernav\" },\r\n            tsx(\"form\", { class: \"inline-block padding-leader-half\", role: \"search\", onsubmit: this.handleSearch },\r\n                tsx(\"input\", { title: config.searchPlaceholder, type: \"search\", placeholder: config.searchPlaceholder, name: \"q\", value: this.state.searchTerm, style: \"margin-top: -1px;\", oninput: this.handleSearchChange }),\r\n                tsx(\"button\", { type: \"submit\", class: \"hide\" }, config.searchPlaceholder)))) : null;\r\n        var headImage = config.headerImage ? (tsx(\"img\", { src: config.headerImageLocation, class: \"header-image\", alt: config.headerText })) : null;\r\n        var agolLink = config.showAgolLink ? (tsx(\"a\", { class: \"top-nav-link\", href: appendProtocol(config.agolLinkLocation.replace(\"${GROUP_ID}\", config.group)), style: \"color: \" + config.headerTextColor, title: config.agolLinkText, target: \"_blank\" }, config.agolLinkText)) : null;\r\n        return (tsx(\"header\", { class: \"top-nav fade-in\", style: \"background-color: \" + config.headColor },\r\n            tsx(\"div\", { class: \"grid-container\" },\r\n                tsx(\"div\", { class: \"column-24\" },\r\n                    tsx(\"div\", { class: \"tablet-hide\" },\r\n                        tsx(\"a\", { href: appendProtocol(config.headerTextURL), target: \"_blank\" },\r\n                            headImage,\r\n                            tsx(\"a\", { class: \"top-nav-title\", style: \"color: \" + config.headerTextColor }, config.headerText)),\r\n                        headSearch,\r\n                        agolLink),\r\n                    tsx(\"div\", { class: \"tablet-show top-nav-flex\" },\r\n                        tsx(\"header\", { class: \"top-nav-flex-title\" },\r\n                            tsx(\"a\", { href: appendProtocol(config.headerTextURL) },\r\n                                tsx(\"a\", { class: \"top-nav-title\", style: \"color: \" + config.headerTextColor }, config.headerText)),\r\n                            tabletHeadSearch))))));\r\n    };\r\n    Header.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (nextProps.filter !== this.state.searchTerm) {\r\n            this.setState({ searchTerm: nextProps.filter });\r\n        }\r\n    };\r\n    Header.prototype.handleSearch = function (e) {\r\n        if (e) {\r\n            e.preventDefault();\r\n        }\r\n        var query = this.state.searchTerm.length > 0 ? \"query=\" + this.state.searchTerm : \"\";\r\n        this.dispatch(_actions_1.push(\"\" + query));\r\n    };\r\n    Header.prototype.handleSearchChange = function (e) {\r\n        this.setState({\r\n            searchTerm: e.target.value\r\n        });\r\n        if (e.target.value === \"\") {\r\n            this.handleSearch();\r\n        }\r\n    };\r\n    return Header;\r\n}(Component_1.default));\r\nexports.default = Header;\r\nfunction appendProtocol(location) {\r\n    if (location.indexOf(\"http\") === 0) {\r\n        return location;\r\n    }\r\n    return \"http://\" + location;\r\n}\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ioQuery = __webpack_require__(2);\r\nvar Component_1 = __webpack_require__(0);\r\nvar Panel_1 = __webpack_require__(21);\r\nvar _actions_1 = __webpack_require__(4);\r\nvar _actions_2 = __webpack_require__(1);\r\nvar supportedItemTypes_1 = __webpack_require__(3);\r\nvar addListener = Component_1.middlewares.addListener;\r\nvar Gallery = /** @class */ (function (_super) {\r\n    __extends(Gallery, _super);\r\n    function Gallery(store) {\r\n        var _this = _super.call(this, store) || this;\r\n        var itemsPerPage = _this.props.base.applicationBaseResult.config.itemsPerPage;\r\n        _this.state = {\r\n            itemPages: splitToPages(_this.props.items.filteredItems, itemsPerPage)\r\n        };\r\n        _this.mapItemsToChildren = _this.mapItemsToChildren.bind(_this);\r\n        _this.handleChildUpdate = _this.handleChildUpdate.bind(_this);\r\n        _this.showInViewer = _this.showInViewer.bind(_this);\r\n        return _this;\r\n    }\r\n    Gallery.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        if (this.props.viewer.fullscreen) {\r\n            return null;\r\n        }\r\n        return (tsx(\"div\", { class: \"grid-container leader-1\" },\r\n            tsx(\"div\", { class: \"column-24\" },\r\n                tsx(\"div\", { class: \"block-group block-group-5-up tablet-block-group-3-up phone-block-group-1-up\" }, this.mapItemsToChildren()))));\r\n    };\r\n    Gallery.prototype.shouldComponentUpdate = function (nextProps) {\r\n        return nextProps.items.displayKey !== this.props.items.displayKey;\r\n    };\r\n    Gallery.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (nextProps.items.displayKey !== this.props.items.displayKey) {\r\n            var itemsPerPage = this.props.base.applicationBaseResult.config.itemsPerPage;\r\n            this.setState({\r\n                itemPages: splitToPages(nextProps.items.filteredItems, itemsPerPage)\r\n            });\r\n        }\r\n        if (nextProps.router.hash !== this.props.router.hash) {\r\n            var currentViewer = ioQuery.queryToObject(this.props.router.hash).viewer;\r\n            var nextViewer = ioQuery.queryToObject(nextProps.router.hash).viewer;\r\n            if (currentViewer !== nextViewer) {\r\n                for (var child in this.childComponents) {\r\n                    if (this.childComponents.hasOwnProperty(child)) {\r\n                        this.childComponents[child].store.dispatch({\r\n                            type: _actions_1.VIEWER_CHANGE,\r\n                            payload: nextViewer\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Gallery.prototype.mapItemsToChildren = function () {\r\n        var _this = this;\r\n        var tsx = this.tsx;\r\n        var displayItems = this.state.itemPages[this.props.page - 1];\r\n        this.childComponents = displayItems.reduce(function (result, item) {\r\n            if (_this.childComponents[item.id]) {\r\n                result[item.id] = _this.childComponents[item.id];\r\n            }\r\n            return result;\r\n        }, {});\r\n        return displayItems.map(function (item) {\r\n            if (item.type === \"Dashboard\") {\r\n                item.url = item.portal.url + \"/apps/opsdashboard/index.html#/\" + item.id;\r\n            }\r\n            return (tsx(Panel_1.default, { key: item.id, store: {\r\n                    reducers: Panel_1.reducers,\r\n                    initialState: {\r\n                        applicationBaseResult: _this.props.base.applicationBaseResult,\r\n                        i18n: _this.props.base.i18n,\r\n                        item: item,\r\n                        itemType: supportedItemTypes_1.default[item.type]\r\n                    },\r\n                    middlewares: [addListener(_this.handleChildUpdate)]\r\n                } }));\r\n        });\r\n    };\r\n    Gallery.prototype.handleChildUpdate = function (action, childState) {\r\n        switch (action.type) {\r\n            case _actions_1.SHOW_IN_VIEWER:\r\n                this.showInViewer(childState.item.id);\r\n                break;\r\n            case _actions_1.SHOW_FULLSCREEN:\r\n                this.showFullscreen(childState.item.id);\r\n                break;\r\n            default: //\r\n        }\r\n    };\r\n    Gallery.prototype.showInViewer = function (itemId) {\r\n        var hash = this.props.router.hash;\r\n        var hashParams = ioQuery.queryToObject(hash);\r\n        hashParams.viewer = itemId;\r\n        this.dispatch(_actions_2.push(ioQuery.objectToQuery(hashParams)));\r\n    };\r\n    Gallery.prototype.showFullscreen = function (itemId) {\r\n        var hash = this.props.router.hash;\r\n        var hashParams = ioQuery.queryToObject(hash);\r\n        hashParams.viewer = itemId;\r\n        hashParams.fullscreen = true;\r\n        this.dispatch(_actions_2.push(ioQuery.objectToQuery(hashParams)));\r\n    };\r\n    return Gallery;\r\n}(Component_1.default));\r\nexports.default = Gallery;\r\nfunction splitToPages(items, perPage) {\r\n    return items.reduce(function (result, item) {\r\n        if (result[result.length - 1].length < perPage) {\r\n            result[result.length - 1].push(item);\r\n        }\r\n        else {\r\n            result.push([item]);\r\n        }\r\n        return result;\r\n    }, [[]]);\r\n}\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar Caption_1 = __webpack_require__(22);\r\nvar _actions_1 = __webpack_require__(4);\r\nvar _reducers_1 = __webpack_require__(23);\r\nexports.reducers = _reducers_1.reducers;\r\nvar Panel = /** @class */ (function (_super) {\r\n    __extends(Panel, _super);\r\n    function Panel(store) {\r\n        var _this = _super.call(this, store) || this;\r\n        _this.state = {\r\n            panelType: _this.props.getPanelType(_this.props.item.type),\r\n        };\r\n        _this.handleMouseOver = _this.handleMouseOver.bind(_this);\r\n        _this.handleMouseOut = _this.handleMouseOut.bind(_this);\r\n        _this.handleItemKeyPress = _this.handleItemKeyPress.bind(_this);\r\n        _this.handleItemClick = _this.handleItemClick.bind(_this);\r\n        _this.handleMaxKeyPress = _this.handleMaxKeyPress.bind(_this);\r\n        _this.handleMaxClick = _this.handleMaxClick.bind(_this);\r\n        _this.registerItemLink = _this.registerItemLink.bind(_this);\r\n        return _this;\r\n    }\r\n    Panel.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        var i18n = this.props.i18n;\r\n        var config = this.props.applicationBaseResult.config;\r\n        var author = config.showAuthor ? (tsx(\"p\", { class: \"font-size--1 card-last hug-bottom author-text\", key: this.props.item.title + \"-author\" }, this.props.item.owner)) : null;\r\n        var tooltipSnippet;\r\n        if (config.showSummaryTooltip) {\r\n            tooltipSnippet = this.props.item.snippet ? this.props.item.snippet : null;\r\n            if (tooltipSnippet && tooltipSnippet.length > config.tooltipTruncLength) {\r\n                tooltipSnippet = tooltipSnippet.slice(0, config.tooltipTruncLength) + \"...\";\r\n            }\r\n        }\r\n        var cardSnippet;\r\n        var summaryElement;\r\n        if (config.showItemSummary) {\r\n            cardSnippet = this.props.item.snippet ? this.props.item.snippet : null;\r\n            if (cardSnippet && cardSnippet.length > config.summaryTruncLength) {\r\n                cardSnippet = cardSnippet.slice(0, config.summaryTruncLength) + \"...\";\r\n            }\r\n            summaryElement = tsx(\"p\", { class: \"item-description-text\" }, cardSnippet);\r\n        }\r\n        var itemPageLink;\r\n        if (config.showItemPageLink) {\r\n            itemPageLink = (tsx(\"a\", { class: \"open-out-icon btn btn-transparent toolbar-tooltip\", \"aria-label\": tooltipSnippet ? tooltipSnippet : i18n.ui.itemExtTip, href: this.props.applicationBaseResult.portal.url + \"/home/item.html?id=\" + this.props.item.id, style: \"color: \" + config.buttonBgColor, key: this.props.item.title + \"-info-icon\", tabindex: \"0\" },\r\n                tsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", style: \"\\n                            fill: #0079c1;\\n                            pointer-events: none;\\n                            display: inline-block;\\n                            width: 1em;\\n                            height: 1em;\\n                            vertical-align: -0.15em;\\n                            padding-right: .15em;\\n                        \" },\r\n                    tsx(\"path\", { d: \"M31.297 16.047c0 8.428-6.826 15.25-15.25 15.25S.797 24.475.797 16.047c0-8.424 6.826-15.25 15.25-15.25s15.25 6.826 15.25 15.25zM18 24V12h-4v12h-2v2h8v-2h-2zm0-18h-4v4h4V6z\" }))));\r\n        }\r\n        var maxLink;\r\n        if (this.props.itemType !== \"file\" && !config.alwaysOpenFullscreen) {\r\n            maxLink = (tsx(\"a\", { class: \"open-out-icon btn btn-transparent toolbar-tooltip\", \"aria-label\": i18n.ui[this.state.panelType + \"ExtTip\"], style: \"color: \" + config.buttonBgColor, key: this.props.item.title + \"-open-out-icon\", onclick: this.handleMaxClick, onkeypress: this.handleMaxKeyPress, tabindex: \"0\" },\r\n                tsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", style: \"\\n                            fill: #0079c1;\\n                            pointer-events: none;\\n                            display: inline-block;\\n                            width: 1em;\\n                            height: 1em;\\n                            vertical-align: -0.15em;\\n                            padding-right: .15em;\\n                        \" },\r\n                    tsx(\"path\", { d: \"M2 4v24h28V4H2zm26 22H4V10h24v16z\" }))));\r\n        }\r\n        var mainTip = this.props.itemType === \"file\" ? i18n.ui.itemExtTip :\r\n            (config.alwaysOpenFullscreen ? i18n.ui[this.state.panelType + \"ExtTip\"] : i18n.ui.galleryTip);\r\n        var title;\r\n        if (config.showItemTitle) {\r\n            title = (tsx(\"a\", { title: mainTip, style: \"color: \" + config.linkColor, class: \"break-word\", onclick: this.handleItemClick, onkeypress: this.handleItemKeyPress },\r\n                tsx(\"h5\", { tabindex: \"0\", class: \"clickable\" }, this.props.item.title)));\r\n        }\r\n        return (tsx(\"div\", { class: \"card block trailer-1 animate-fade-in card-fade\", style: \"background-color: \" + config.cardColor + \"; z-index: \" + 1000, key: this.props.item.id + \"-div\" },\r\n            tsx(\"figure\", { class: \"card-image-wrap\" },\r\n                tsx(\"a\", { title: mainTip, role: \"link\", tabindex: \"0\", onclick: this.handleItemClick, onkeypress: this.handleItemKeyPress, afterCreate: this.registerItemLink },\r\n                    tsx(\"img\", { key: this.props.item.id + \"-thumbnail\", class: \"card-image clickable thumbnail-min\", src: \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\", alt: this.props.item.title, onmouseover: this.handleMouseOver, onmouseout: this.handleMouseOut, style: \"\\n                                background-image: url(\" + this.props.item.thumbnailUrl + \");\\n                                background-repeat: no-repeat;\\n                                background-size: cover;\\n                            \" })),\r\n                tsx(Caption_1.default, { key: \"card-caption\" })),\r\n            tsx(\"div\", { class: \"card-content\", style: \"color: \" + config.fontColor },\r\n                title,\r\n                summaryElement,\r\n                author,\r\n                tsx(\"div\", { class: \"open-out-container\" },\r\n                    itemPageLink,\r\n                    maxLink))));\r\n    };\r\n    Panel.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (!nextProps.activeViewer &&\r\n            this.props.activeViewer &&\r\n            this.state.itemLink &&\r\n            this.props.activeViewer === this.props.item.id) {\r\n            this.state.itemLink.focus();\r\n        }\r\n    };\r\n    Panel.prototype.registerItemLink = function (itemLink) {\r\n        this.setState({ itemLink: itemLink });\r\n    };\r\n    Panel.prototype.handleMouseOver = function () {\r\n        this.dispatch(_actions_1.mouseOver());\r\n    };\r\n    Panel.prototype.handleMouseOut = function () {\r\n        this.dispatch(_actions_1.mouseOut());\r\n    };\r\n    Panel.prototype.handleItemKeyPress = function (e) {\r\n        if (e.key === \"Enter\") {\r\n            this.handleItemClick();\r\n        }\r\n    };\r\n    Panel.prototype.handleItemClick = function () {\r\n        if (this.props.itemType === \"file\") {\r\n            window.open(this.props.applicationBaseResult.portal.url + \"/home/item.html?id=\" + this.props.item.id, \"_blank\");\r\n        }\r\n        else {\r\n            if (this.props.applicationBaseResult.config.alwaysOpenFullscreen) {\r\n                this.handleMaxClick();\r\n            }\r\n            else {\r\n                this.dispatch(_actions_1.showInViewer());\r\n            }\r\n        }\r\n    };\r\n    Panel.prototype.handleMaxKeyPress = function (e) {\r\n        if (e.key === \"Enter\") {\r\n            this.handleMaxClick();\r\n        }\r\n    };\r\n    Panel.prototype.handleMaxClick = function () {\r\n        if (this.props.applicationBaseResult.config.openFullscreenSeparateTab) {\r\n            if (this.props.itemType === \"webapp\") {\r\n                window.open(this.props.item.url, \"_blank\");\r\n            }\r\n            else {\r\n                window.open(\"\" + window.location.origin + window.location.pathname + window.location.search + \"#viewer=\" + this.props.item.id + \"&fullscreen=true\", \"_blank\");\r\n            }\r\n        }\r\n        else {\r\n            if (this.props.itemType === \"webapp\") {\r\n                window.location.href = this.props.item.url;\r\n            }\r\n            else {\r\n                this.dispatch(_actions_1.showFullscreen());\r\n            }\r\n        }\r\n    };\r\n    return Panel;\r\n}(Component_1.default));\r\nexports.default = Panel;\r\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar Caption = /** @class */ (function (_super) {\r\n    __extends(Caption, _super);\r\n    function Caption(store) {\r\n        var _this = _super.call(this, store) || this;\r\n        _this.state = {\r\n            captionBelowOpacity: 0.8,\r\n            captionOpacity: 1,\r\n            captionTransform: 0,\r\n            panelType: _this.props.getPanelType(_this.props.item.type)\r\n        };\r\n        return _this;\r\n    }\r\n    Caption.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        var config = this.props.applicationBaseResult.config;\r\n        if (config.showItemType) {\r\n            if (config.itemTypeBelowThumbnail) {\r\n                return (tsx(\"div\", { class: \"card-below-image-caption\", style: \"\\n                            opacity: \" + this.state.captionBelowOpacity + \";\\n                            background-color: \" + convertHex(config[this.state.panelType + \"CaptionColor\"], 80) + \";\\n                            color: \" + config.captionTextColor + \";\\n                        \" }, this.props.item.displayName));\r\n            }\r\n            else {\r\n                return (tsx(\"div\", { class: \"card-image-caption\", style: \"\\n                            opacity: \" + this.state.captionOpacity + \";\\n                            transform: translate(0, \" + this.state.captionTransform + \"%);\\n                            background-color: \" + convertHex(config[this.state.panelType + \"CaptionColor\"], 80) + \";\\n                            color: \" + config.captionTextColor + \";\\n                        \" }, this.props.item.displayName));\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Caption.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (nextProps.hovering !== this.props.hovering) {\r\n            this.setState({\r\n                captionBelowOpacity: nextProps.hovering ? 1 : 0.8,\r\n                captionOpacity: nextProps.hovering ? 0 : 1,\r\n                captionTransform: nextProps.hovering ? 100 : 0\r\n            });\r\n        }\r\n    };\r\n    return Caption;\r\n}(Component_1.default));\r\nexports.default = Caption;\r\nfunction convertHex(hex, opacity) {\r\n    hex = hex.replace(\"#\", \"\");\r\n    var r = parseInt(hex.substring(0, 2), 16);\r\n    var g = parseInt(hex.substring(2, 4), 16);\r\n    var b = parseInt(hex.substring(4, 6), 16);\r\n    var result = \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + opacity / 100 + \")\";\r\n    return result;\r\n}\r\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar _actions_1 = __webpack_require__(4);\r\nvar applicationBaseResult = function (state) {\r\n    if (state === void 0) { state = {}; }\r\n    return state;\r\n};\r\nvar i18n = function (state) {\r\n    if (state === void 0) { state = {}; }\r\n    return state;\r\n};\r\nvar item = function (state) {\r\n    if (state === void 0) { state = {}; }\r\n    return state;\r\n};\r\nvar itemType = function (state) {\r\n    if (state === void 0) { state = \"file\"; }\r\n    return state;\r\n};\r\nvar getPanelType = function (state) {\r\n    if (state === void 0) { state = function (type) {\r\n        var recognizedTypes = {\r\n            \"Web Mapping Application\": \"app\",\r\n            \"Web Map\": \"map\",\r\n            \"Web Scene\": \"scene\",\r\n            \"Dashboard\": \"app\"\r\n        };\r\n        if (recognizedTypes[type]) {\r\n            return recognizedTypes[type];\r\n        }\r\n        return \"file\";\r\n    }; }\r\n    return state;\r\n};\r\nvar hovering = function (state, action) {\r\n    if (state === void 0) { state = false; }\r\n    switch (action.type) {\r\n        case _actions_1.MOUSE_OVER:\r\n            return true;\r\n        case _actions_1.MOUSE_OUT:\r\n            return false;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nvar activeViewer = function (state, action) {\r\n    switch (action.type) {\r\n        case _actions_1.VIEWER_CHANGE:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nexports.reducers = Component_1.combineReducers({\r\n    applicationBaseResult: applicationBaseResult,\r\n    i18n: i18n,\r\n    item: item,\r\n    hovering: hovering,\r\n    getPanelType: getPanelType,\r\n    itemType: itemType,\r\n    activeViewer: activeViewer\r\n});\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ioQuery = __webpack_require__(2);\r\nvar Component_1 = __webpack_require__(0);\r\nvar _actions_1 = __webpack_require__(1);\r\nvar View_1 = __webpack_require__(25);\r\nvar convertHex_1 = __webpack_require__(32);\r\nvar supportedItemTypes_1 = __webpack_require__(3);\r\nvar Viewer = /** @class */ (function (_super) {\r\n    __extends(Viewer, _super);\r\n    function Viewer(store) {\r\n        var _this = _super.call(this, store) || this;\r\n        _this.state = {\r\n            containerClasses: {\r\n                \"animate-fade-in\": true,\r\n                \"animate-fade-out\": false\r\n            },\r\n            scrollY: 0\r\n        };\r\n        _this.handleExitKeyPress = _this.handleExitKeyPress.bind(_this);\r\n        _this.handleExitClick = _this.handleExitClick.bind(_this);\r\n        _this.closeViewer = _this.closeViewer.bind(_this);\r\n        return _this;\r\n    }\r\n    Viewer.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        var i18n = this.props.base.i18n;\r\n        var config = this.props.base.applicationBaseResult.config;\r\n        var item = this.props.items.viewerItem;\r\n        if (this.props.viewer.visible && !!item.id) {\r\n            var viewType = supportedItemTypes_1.default[item.type];\r\n            var view = void 0;\r\n            if (viewType === \"webmap\") {\r\n                view = tsx(View_1.MapView, { key: item.id });\r\n            }\r\n            else if (viewType === \"webscene\") {\r\n                view = tsx(View_1.SceneView, { key: item.id });\r\n            }\r\n            else if (viewType === \"webapp\") {\r\n                view = tsx(View_1.AppView, { key: item.id });\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n            if (this.props.viewer.fullscreen) {\r\n                return (tsx(\"div\", { id: \"map-container\", class: \"map-container fullscreen\", key: \"map-container-fullscreen-\" + item.id }, view));\r\n            }\r\n            return (tsx(\"div\", { id: \"view-container\", key: \"view-container\", classes: this.state.containerClasses, style: \"background-color: \" + convertHex_1.default(config.bgColor, 85) + \";\" },\r\n                tsx(\"div\", { id: \"map-container\", class: \"map-container\", key: \"map-container-\" + item.id }, view),\r\n                tsx(\"button\", { class: \"btn btn-clear view-exit-button clickable\", onclick: this.handleExitClick, onkeypress: this.handleExitKeyPress, title: i18n.ui.close, afterCreate: this.focus },\r\n                    tsx(\"span\", { class: \"icon-ui-close view-exit-icon\" }))));\r\n        }\r\n        return null;\r\n    };\r\n    Viewer.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (!this.props.viewer.visible && nextProps.viewer.visible) {\r\n            this.setState({ scrollY: window.scrollY });\r\n        }\r\n        if (this.props.viewer.visible && !nextProps.viewer.visible) {\r\n            this.childComponents = {};\r\n        }\r\n    };\r\n    Viewer.prototype.focus = function (el) {\r\n        setTimeout(function () {\r\n            el.focus();\r\n        }, 10);\r\n    };\r\n    Viewer.prototype.handleExitKeyPress = function (e) {\r\n        if (e.key === \"Enter\") {\r\n            this.handleExitClick();\r\n        }\r\n    };\r\n    Viewer.prototype.handleExitClick = function () {\r\n        var _this = this;\r\n        this.setState({\r\n            containerClasses: {\r\n                \"animate-fade-in\": false,\r\n                \"animate-fade-out\": true\r\n            }\r\n        });\r\n        setTimeout(function () {\r\n            _this.closeViewer();\r\n            _this.setState({\r\n                containerClasses: {\r\n                    \"animate-fade-in\": true,\r\n                    \"animate-fade-out\": false\r\n                }\r\n            });\r\n        }, 750);\r\n    };\r\n    Viewer.prototype.closeViewer = function () {\r\n        var hash = this.props.router.hash;\r\n        var hashParams = ioQuery.queryToObject(hash);\r\n        delete hashParams.viewer;\r\n        this.dispatch(_actions_1.push(ioQuery.objectToQuery(hashParams)));\r\n    };\r\n    return Viewer;\r\n}(Component_1.default));\r\nexports.default = Viewer;\r\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar MapView_1 = __webpack_require__(26);\r\nexports.MapView = MapView_1.MapView;\r\nvar AppView_1 = __webpack_require__(30);\r\nexports.AppView = AppView_1.AppView;\r\nvar SceneView_1 = __webpack_require__(31);\r\nexports.SceneView = SceneView_1.SceneView;\r\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar ViewBase_1 = __webpack_require__(6);\r\nvar MapView = /** @class */ (function (_super) {\r\n    __extends(MapView, _super);\r\n    function MapView(store) {\r\n        return _super.call(this, store) || this;\r\n    }\r\n    MapView.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        var config = this.props.base.applicationBaseResult.config;\r\n        return (tsx(ViewBase_1.default, { key: \"map-view\", store: {\r\n                reducers: ViewBase_1.reducers,\r\n                initialState: {\r\n                    config: config,\r\n                    i18n: this.props.base.i18n,\r\n                    id: this.props.items.viewerItem.id,\r\n                    widgets: Object.keys(config)\r\n                        .filter(function (key) { return key.indexOf(\"Widget\") !== -1; })\r\n                        .reduce(function (result, key) {\r\n                        return __assign({}, result, (_a = {}, _a[key] = config[key], _a));\r\n                        var _a;\r\n                    }, {}),\r\n                    viewModule: \"esri/views/MapView\",\r\n                    webModule: \"esri/WebMap\",\r\n                    containerId: \"map-container\"\r\n                }\r\n            } }));\r\n    };\r\n    return MapView;\r\n}(Component_1.default));\r\nexports.MapView = MapView;\r\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar initialState = {\r\n    config: {},\r\n    i18n: {},\r\n    id: \"\",\r\n    widgets: {},\r\n    viewModule: \"\",\r\n    webModule: \"\",\r\n    containerId: \"map-container\"\r\n};\r\nexports.reducers = function (state, action) {\r\n    if (state === void 0) { state = initialState; }\r\n    return state;\r\n};\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_29__;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar AppView = /** @class */ (function (_super) {\r\n    __extends(AppView, _super);\r\n    function AppView(store) {\r\n        return _super.call(this, store) || this;\r\n    }\r\n    AppView.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        return (tsx(\"iframe\", { src: this.props.items.viewerItem.url, class: \"app-frame\", id: \"embedded-mapping-application-iframe\", name: \"nested-iframe\" },\r\n            tsx(\"h3\", { class: \"center-style\" }, this.props.base.i18n.viewLoading.iframe)));\r\n    };\r\n    return AppView;\r\n}(Component_1.default));\r\nexports.AppView = AppView;\r\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar ViewBase_1 = __webpack_require__(6);\r\nvar SceneView = /** @class */ (function (_super) {\r\n    __extends(SceneView, _super);\r\n    function SceneView(store) {\r\n        return _super.call(this, store) || this;\r\n    }\r\n    SceneView.prototype.render = function () {\r\n        var tsx = this.tsx;\r\n        var config = this.props.base.applicationBaseResult.config;\r\n        return (tsx(ViewBase_1.default, { key: \"map-view\", store: {\r\n                reducers: ViewBase_1.reducers,\r\n                initialState: {\r\n                    config: config,\r\n                    i18n: this.props.base.i18n,\r\n                    id: this.props.items.viewerItem.id,\r\n                    widgets: Object.keys(config)\r\n                        .filter(function (key) { return key.indexOf(\"Widget\") !== -1; })\r\n                        .reduce(function (result, key) {\r\n                        return __assign({}, result, (_a = {}, _a[key] = config[key], _a));\r\n                        var _a;\r\n                    }, {}),\r\n                    viewModule: \"esri/views/SceneView\",\r\n                    webModule: \"esri/WebScene\",\r\n                    containerId: \"map-container\"\r\n                }\r\n            } }));\r\n    };\r\n    return SceneView;\r\n}(Component_1.default));\r\nexports.SceneView = SceneView;\r\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = function (hex, opacity) {\r\n    hex = hex.replace(\"#\", \"\");\r\n    var r = parseInt(hex.substring(0, 2), 16);\r\n    var g = parseInt(hex.substring(2, 4), 16);\r\n    var b = parseInt(hex.substring(4, 6), 16);\r\n    var result = \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + opacity / 100 + \")\";\r\n    return result;\r\n};\r\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ioQuery = __webpack_require__(2);\r\nvar Component_1 = __webpack_require__(0);\r\nvar _actions_1 = __webpack_require__(1);\r\nvar Pager = /** @class */ (function (_super) {\r\n    __extends(Pager, _super);\r\n    function Pager(store) {\r\n        var _this = _super.call(this, store) || this;\r\n        _this.handleNext = _this.handleNext.bind(_this);\r\n        _this.handlePrevious = _this.handlePrevious.bind(_this);\r\n        _this.handlePageButton = _this.handlePageButton.bind(_this);\r\n        _this.handlePage = _this.handlePage.bind(_this);\r\n        return _this;\r\n    }\r\n    Pager.prototype.render = function () {\r\n        var _this = this;\r\n        var tsx = this.tsx;\r\n        var config = this.props.base.applicationBaseResult.config;\r\n        var displayItems = this.props.items.filteredItems;\r\n        var pages = Math.ceil(displayItems.length / config.itemsPerPage);\r\n        var prevButtonClasses = {\r\n            \"btn\": true,\r\n            \"btn-disabled\": this.props.page <= 1,\r\n            \"btn-transparent\": true\r\n        };\r\n        var nextButtonClasses = {\r\n            \"btn\": true,\r\n            \"btn-arrow\": true,\r\n            \"btn-disabled\": this.props.page >= pages,\r\n            \"btn-transparent\": true\r\n        };\r\n        var pageButtons = Array.apply(null, Array(pages)).map(function (v, i) {\r\n            var isActive = _this.props.page === i + 1;\r\n            return (tsx(\"a\", { id: \"page-\" + (i + 1) + \"-button\", title: \"page-\" + (i + 1), class: \"btn\" + (!isActive ? \" btn-transparent\" : \"\"), onclick: _this.handlePageButton, role: \"link\", tabindex: \"0\", style: \"\\n                        color: \" + (isActive ? config.buttonTextColor : config.buttonBgColor) + \";\\n                        background-color: \" + (isActive ? config.buttonBgColor : null) + \";\\n                        border: \" + (isActive ? \"1px solid \" + config.buttonBgColor : \"none\") + \"\\n                    \", key: \"page-button-\" + (i + 1) + \"-\" + _this.props.items.displayKey }, i + 1));\r\n        });\r\n        return (tsx(\"div\", { class: \"text-center trailer-1 leader-1\", key: \"pager\" },\r\n            tsx(\"a\", { id: \"previous\", title: \"previous\", classes: prevButtonClasses, role: \"link\", tabindex: \"0\", style: \"color:\" + config.buttonBgColor + \";\", key: \"previous-button\", onclick: this.handlePrevious }, \"Previous\"),\r\n            pageButtons,\r\n            tsx(\"a\", { id: \"next\", title: \"next\", classes: nextButtonClasses, role: \"link\", tabindex: \"0\", style: \"color:\" + config.buttonBgColor + \";\", key: \"next-button\", onclick: this.handleNext }, \"Next\")));\r\n    };\r\n    Pager.prototype.handleNext = function () {\r\n        this.handlePage(this.props.page + 1);\r\n    };\r\n    Pager.prototype.handlePrevious = function () {\r\n        this.handlePage(this.props.page - 1);\r\n    };\r\n    Pager.prototype.handlePageButton = function (e) {\r\n        this.handlePage(e.target.text);\r\n    };\r\n    Pager.prototype.handlePage = function (page) {\r\n        var hash = this.props.router.hash;\r\n        var hashParams = ioQuery.queryToObject(hash);\r\n        if (page > 1) {\r\n            hashParams.page = page;\r\n        }\r\n        else {\r\n            if (hashParams.page) {\r\n                delete hashParams.page;\r\n            }\r\n        }\r\n        this.dispatch(_actions_1.push(ioQuery.objectToQuery(hashParams)));\r\n    };\r\n    return Pager;\r\n}(Component_1.default));\r\nexports.default = Pager;\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Component_1 = __webpack_require__(0);\r\nvar base_1 = __webpack_require__(35);\r\nvar items_1 = __webpack_require__(36);\r\nvar router_1 = __webpack_require__(37);\r\nvar filter_1 = __webpack_require__(38);\r\nvar page_1 = __webpack_require__(39);\r\nvar viewer_1 = __webpack_require__(40);\r\nexports.reducers = Component_1.combineReducers({\r\n    base: base_1.default,\r\n    items: items_1.default,\r\n    router: router_1.default,\r\n    filter: filter_1.default,\r\n    page: page_1.default,\r\n    viewer: viewer_1.default\r\n});\r\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar _actions_1 = __webpack_require__(1);\r\nexports.default = function (state, action) {\r\n    switch (action.type) {\r\n        case _actions_1.SAVE_APP_BASE_RESULT:\r\n            var perPage = parseInt(action.payload.config.itemsPerPage, 10);\r\n            return __assign({}, state, { loadMessage: \"groupItems\", applicationBaseResult: __assign({}, action.payload, { config: __assign({}, action.payload.config, { itemsPerPage: !isNaN(perPage) && perPage > 0 ? perPage : 20 }) }) });\r\n        case _actions_1.LOAD_APP_FAIL:\r\n            return __assign({}, state, { status: \"failed\" });\r\n        case _actions_1.LOAD_APP_PROGRESS:\r\n            return __assign({}, state, { loadMessage: action.payload });\r\n        case _actions_1.LOAD_APP_SUCCESS:\r\n            return __assign({}, state, { status: \"success\" });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ioQuery = __webpack_require__(2);\r\nvar _actions_1 = __webpack_require__(1);\r\nvar initialState = {\r\n    allItems: [],\r\n    filteredItems: [],\r\n    displayKey: \"\",\r\n    viewerItem: {}\r\n};\r\nexports.default = function (state, action) {\r\n    if (state === void 0) { state = initialState; }\r\n    switch (action.type) {\r\n        case _actions_1.UPDATE_ITEMS:\r\n            return __assign({}, state, { allItems: action.payload });\r\n        case _actions_1.HASH_CHANGE:\r\n            var hashParams_1 = ioQuery.queryToObject(action.payload);\r\n            if (hashParams_1.viewer) {\r\n                var viewerItem = state.allItems.filter(function (item) { return item.id === hashParams_1.viewer; })[0];\r\n                return __assign({}, state, { viewerItem: viewerItem ? viewerItem : {}, filteredItems: filterItems(state.allItems, hashParams_1.query ? hashParams_1.query : \"\"), displayKey: Math.random().toString(36).substring(7) });\r\n            }\r\n            return __assign({}, state, { filteredItems: filterItems(state.allItems, hashParams_1.query ? hashParams_1.query : \"\"), displayKey: Math.random().toString(36).substring(7) });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nfunction filterItems(items, filter) {\r\n    return items.filter(function (item) { return (item.title.toLowerCase().indexOf(filter) !== -1 ||\r\n        item.type.toLowerCase().indexOf(filter) !== -1 ||\r\n        item.owner.toLowerCase().indexOf(filter) !== -1 ||\r\n        (item.tags && item.tags.map(function (tag) { return tag.toLowerCase(); }).indexOf(filter) !== -1) ||\r\n        (item.description && item.description.indexOf(filter) !== -1) ||\r\n        (item.snippet && item.snippet.indexOf(filter) !== -1)); });\r\n}\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar _actions_1 = __webpack_require__(1);\r\nvar initialState = {\r\n    hash: \"\"\r\n};\r\nexports.default = function (state, action) {\r\n    if (state === void 0) { state = initialState; }\r\n    switch (action.type) {\r\n        case _actions_1.HASH_CHANGE:\r\n            return __assign({}, state, { hash: action.payload });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ioQuery = __webpack_require__(2);\r\nvar _actions_1 = __webpack_require__(1);\r\nexports.default = function (state, action) {\r\n    if (state === void 0) { state = \"\"; }\r\n    switch (action.type) {\r\n        case _actions_1.HASH_CHANGE:\r\n            var hashParams = ioQuery.queryToObject(action.payload);\r\n            return (hashParams.query ? hashParams.query : \"\");\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ioQuery = __webpack_require__(2);\r\nvar _actions_1 = __webpack_require__(1);\r\nexports.default = function (state, action) {\r\n    if (state === void 0) { state = 1; }\r\n    switch (action.type) {\r\n        case _actions_1.HASH_CHANGE:\r\n            var hashParams = ioQuery.queryToObject(action.payload);\r\n            if (hashParams.page) {\r\n                return parseInt(hashParams.page, 10);\r\n            }\r\n            return 1;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ioQuery = __webpack_require__(2);\r\nvar _actions_1 = __webpack_require__(1);\r\nvar initialState = {\r\n    visible: false,\r\n    fullscreen: false\r\n};\r\nexports.default = function (state, action) {\r\n    if (state === void 0) { state = initialState; }\r\n    switch (action.type) {\r\n        case _actions_1.HASH_CHANGE:\r\n            var hashParams = ioQuery.queryToObject(action.payload);\r\n            if (hashParams.viewer) {\r\n                return __assign({}, state, { visible: true, fullscreen: !!hashParams.fullscreen });\r\n            }\r\n            return __assign({}, state, { visible: false, fullscreen: false });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar _actions_1 = __webpack_require__(1);\r\nexports.router = function () { return function (next) { return function (action) {\r\n    switch (action.type) {\r\n        case _actions_1.PUSH:\r\n            window.location.hash = action.payload;\r\n            break;\r\n        default:\r\n            return next(action);\r\n    }\r\n}; }; };\r\nfunction startHistoryListener(store) {\r\n    store.dispatch(_actions_1.hashChange(window.location.hash.slice(1)));\r\n    window.onhashchange = function (event) {\r\n        store.dispatch(_actions_1.hashChange(window.location.hash.slice(1)));\r\n    };\r\n}\r\nexports.startHistoryListener = startHistoryListener;\r\n\n\n/***/ })\n/******/ ])});;\n\n\n// WEBPACK FOOTER //\n// application.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 78d3052e8f70edb5e0d7","import { tsx as h } from \"esri/widgets/support/widget\";\r\n\r\ninterface StoreParams {\r\n    reducers: any;\r\n    parentWidget: __esri.Widget;\r\n    initialState?: __Component.Pojo;\r\n    middlewares?: any[];\r\n}\r\n\r\nexport default abstract class Component<ApplicationState extends __Component.Pojo, ComponentState extends __Component.Pojo = {}> {\r\n    /** Child components defined in this component's render function */\r\n    public childComponents: {\r\n        [childKey: string]: Component<__Component.Pojo, __Component.Pojo>;\r\n    } = {};\r\n\r\n    /** Internal component state */\r\n    public state: ComponentState;\r\n\r\n    /** The full state tree for the current scope */\r\n    public props: ApplicationState;\r\n\r\n    /** Indicates whether a component needs to re-render, or can simply return precalculated vdom */\r\n    public dirty: Boolean = true;\r\n\r\n    /** The previous result of rendering the component */\r\n    public renderResult: any;\r\n\r\n    /** Injectable hyperscript or custom components */\r\n    public children: any;\r\n\r\n    /** The component's store, which is shared by all components in the scope */\r\n    public store: __Component.Store;\r\n\r\n    constructor(store: __Component.Store) {\r\n        this.store = store;\r\n        this.props = store.getState();\r\n\r\n        this.tsx = this.tsx.bind(this);\r\n        this.updateProps = this.updateProps.bind(this);\r\n\r\n        store.subscribe(this.updateProps);\r\n    }\r\n\r\n    /** tsx function required to render child components */\r\n    public tsx(element: string | any, properties?: any, children?: any) {\r\n        if (typeof element === \"string\") { // Rendering ordinary hyperscript\r\n            return h.apply(this, arguments);\r\n        } else { // Rendering a custom component\r\n            if (properties && properties.key) { // Make sure the component has a unique key\r\n                let child = this.childComponents[properties.key];\r\n                if (child) {\r\n                    if (child.dirty) { // Need to re-render\r\n                        child.renderResult = child.render();\r\n                    }\r\n                    return child.renderResult;\r\n                } else {\r\n                    this.childComponents[properties.key] = new element(\r\n                        properties.store ? newStore({ ...properties.store, parentWidget: this.store.parentWidget }) :\r\n                        this.store,\r\n                        properties.key\r\n                    );\r\n                    this.childComponents[properties.key].renderResult = this.childComponents[properties.key].render();\r\n                    return this.childComponents[properties.key].renderResult;\r\n                }\r\n            } else {\r\n                throw new Error(\"Custom components must each have a unique key property.\");\r\n            }\r\n        }\r\n    }\r\n    \r\n    /** Returns a VNode, needs to be implemented by component creator */\r\n    public render() {}\r\n    \r\n    /** Called before a component's props are updated. */\r\n    public componentWillReceiveProps(nextProps: ApplicationState) {}\r\n    \r\n    /** Returns true by default. If false returned component will not re-render */\r\n    public shouldComponentUpdate(nextProps: ApplicationState) {\r\n        return true;\r\n    }\r\n    \r\n    /** Updates the private state of the component */\r\n    public setState(newState: Partial<ComponentState>) {\r\n        this.state = {...this.state as any, ...newState as any};\r\n        this.store.parentWidget.scheduleRender();\r\n    }\r\n    \r\n    /** Dispatches an action to the component's store */\r\n    public dispatch(action: any) {\r\n        this.store.dispatch(action);\r\n    }\r\n\r\n    /** Used behind the scenes to sync a component's props with the current application state */\r\n    private updateProps(nextProps: ApplicationState) {\r\n        this.componentWillReceiveProps(nextProps);\r\n        this.dirty = this.shouldComponentUpdate(nextProps);\r\n        this.props = nextProps;\r\n    }\r\n}\r\n\r\n/** Creates a new store of application state */\r\nexport function newStore(storeParams: StoreParams) {\r\n    if (storeParams.middlewares) {\r\n        return applyMiddleware(...storeParams.middlewares)(createStore)(\r\n            storeParams.reducers, storeParams.parentWidget, storeParams.initialState\r\n        );\r\n    }\r\n    return createStore(storeParams.reducers, storeParams.parentWidget, storeParams.initialState);\r\n}\r\n\r\n/** Combines reducers to allow composition */\r\nexport function combineReducers(reducers: any) {\r\n    var finalReducers = pick(reducers, (val: any) => typeof val === 'function');\r\n    return (state = {}, action: any) => mapValues(finalReducers,\r\n        (reducer: any, key: any) => reducer(state[key], action)\r\n    );\r\n}\r\n\r\nfunction createStore(reducers: any, parentWidget: __esri.Widget, initialState?: __Component.Pojo): __Component.Store {\r\n    let state: __Component.Pojo;\r\n    if (initialState) {\r\n        state = initialState;\r\n    }\r\n    const subscribers: ((state: __Component.Pojo) => void)[] = [];\r\n    const store = {\r\n        parentWidget,\r\n        dispatch: (action: any) => {\r\n            state = reducers(state, action);\r\n            subscribers.forEach(handler => handler(state));\r\n            parentWidget.scheduleRender();\r\n        },\r\n        subscribe: (handler: (state: __Component.Pojo) => void) => {\r\n            subscribers.push(handler);\r\n            return function unsubscribe() {\r\n                const index = subscribers.indexOf(handler);\r\n                subscribers.splice(index, 1);\r\n            };\r\n        },\r\n        getState() {\r\n            return state;\r\n        }\r\n    };\r\n    store.dispatch({ type: \"INITIALIZE\" });\r\n    return store;\r\n}\r\n\r\nfunction applyMiddleware(...middlewares: any[]) {\r\n    return (next: any) => (reducer: any, parentWidget: any, initialState: any) => {\r\n      var store = next(reducer, parentWidget, initialState);\r\n      var dispatch = store.dispatch;\r\n      var chain = [];\r\n  \r\n      chain = middlewares.map(middleware => middleware({\r\n        getState: store.getState,\r\n        dispatch: (action: any) => dispatch(action)\r\n      }));\r\n      dispatch = compose(...chain)(store.dispatch);\r\n  \r\n      return { ...store, dispatch };\r\n    };\r\n  }\r\n\r\nfunction compose(...funcs: any[]) {\r\n    return (arg: any) => funcs.reduceRight((composed, f) => f(composed), arg);\r\n}\r\n    \r\nfunction mapValues(obj: __Component.Pojo, fn: any) {\r\n    return Object.keys(obj).reduce((result, key) => {\r\n        result[key] = fn(obj[key], key);\r\n        return result;\r\n    }, {});\r\n}\r\n\r\nfunction pick(obj: __Component.Pojo, fn: any) {\r\n    return Object.keys(obj).reduce((result, key) => {\r\n        if (fn(obj[key])) {\r\n            result[key] = obj[key];\r\n        }\r\n        return result;\r\n    }, {});\r\n}\r\n\r\n/** Available Redux middlewares */\r\nexport const middlewares = {\r\n    /** Asynchronous control flow using thunks */\r\n    thunk: (params: { dispatch: any, getState: any }) => (next: any) => (action: any) => {\r\n        if (typeof action === \"function\") {\r\n            return action(params.dispatch, params.getState);\r\n        }\r\n        return next(action);\r\n    },\r\n    /** Log dispatch and next state to the console */\r\n    debug:  (params: { dispatch: any, getState: any }) => (next: any) => (action: any) => {\r\n        console.log(action.type, action);\r\n        let result = next(action);\r\n        console.log('next state', params.getState());\r\n        return result;\r\n    },\r\n    /** Send actions and resulting state to a listener */\r\n    addListener: (listener: (action: any, nextState: __Component.Pojo) => any) =>\r\n        (params: { dispatch: any, getState: any }) => (next: any) => (action: any) => {\r\n            let result = next(action);\r\n            listener(action, params.getState());\r\n            return result;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Component.ts","export {\r\n    SAVE_APP_BASE_RESULT,\r\n    LOAD_APP_FAIL,\r\n    LOAD_APP_PROGRESS,\r\n    LOAD_APP_SUCCESS,\r\n    loadApplicationBase\r\n} from \"./base\";\r\n\r\nexport {\r\n    UPDATE_ITEMS,\r\n    FILTER_ITEMS,\r\n    filterItems,\r\n    updateItems\r\n} from \"./items\";\r\n\r\nexport {\r\n    PUSH,\r\n    HASH_CHANGE,\r\n    push,\r\n    hashChange\r\n} from \"./router\";\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_actions/index.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dojo/io-query\"\n// module id = 2\n// module chunks = 0","const fileTypes = {\r\n    \"360 VR Experience\": \"file\",\r\n    \"App Builder Extension\": \"file\",\r\n    \"Application\": \"file\",\r\n    \"ArcGIS Pro Add In\": \"file\",\r\n    \"ArcGIS Pro Configuration\": \"file\",\r\n    \"ArcPad Package\": \"file\",\r\n    \"CAD Drawing\": \"file\",\r\n    \"CSV\": \"file\",\r\n    \"CSV Collection\": \"file\",\r\n    \"CityEngine Web Scene\": \"file\",\r\n    \"Code Sample\": \"file\",\r\n    \"Dashboard\": \"file\",\r\n    \"Desktop Add In\": \"file\",\r\n    \"Desktop Application\": \"file\",\r\n    \"Desktop Application Template\": \"file\",\r\n    \"Desktop Style\": \"file\",\r\n    \"Document Link\": \"file\",\r\n    \"Explorer Add In\": \"file\",\r\n    \"Explorer Layer\": \"file\",\r\n    \"Explorer Map\": \"file\",\r\n    \"Feature Collection\": \"file\",\r\n    \"Feature Service\": \"file\",\r\n    \"File Geodatabase\": \"file\",\r\n    \"GeoJson\": \"file\",\r\n    \"Geocoding Service\": \"file\",\r\n    \"Geodata Service\": \"file\",\r\n    \"Geometry Service\": \"file\",\r\n    \"Geoprocessing Package\": \"file\",\r\n    \"Geoprocessing Sample\": \"file\",\r\n    \"Geoprocessing Service\": \"file\",\r\n    \"Globe Document\": \"file\",\r\n    \"Globe Service\": \"file\",\r\n    \"Image\": \"file\",\r\n    \"Image Collection\": \"file\",\r\n    \"Image Service\": \"file\",\r\n    \"Insights Workbook\": \"file\",\r\n    \"KML\": \"file\",\r\n    \"KML Collection\": \"file\",\r\n    \"Layer\": \"file\",\r\n    \"Layer Package\": \"file\",\r\n    \"Layout\": \"file\",\r\n    \"Locator Package\": \"file\",\r\n    \"Map Document\": \"file\",\r\n    \"Map Package\": \"file\",\r\n    \"Map Service\": \"file\",\r\n    \"Map Template\": \"file\",\r\n    \"Microsoft Excel\": \"file\",\r\n    \"Microsoft Powerpoint\": \"file\",\r\n    \"Microsoft Word\": \"file\",\r\n    \"Mobile Application\": \"file\",\r\n    \"Mobile Basemap Package\": \"file\",\r\n    \"Mobile Map Package\": \"file\",\r\n    \"Network Analysis Service\": \"file\",\r\n    \"Operations Dashboard Add In\": \"file\",\r\n    \"Operations Dashboard Extension\": \"file\",\r\n    \"PDF\": \"file\",\r\n    \"Pro Map\": \"file\",\r\n    \"Project Package\": \"file\",\r\n    \"Project Template\": \"file\",\r\n    \"Published Map\": \"file\",\r\n    \"Raster function template\": \"file\",\r\n    \"Rule Package\": \"file\",\r\n    \"Scene Document\": \"file\",\r\n    \"Scene Package\": \"file\",\r\n    \"Scene Service\": \"file\",\r\n    \"Service Definition\": \"file\",\r\n    \"Shapefile\": \"file\",\r\n    \"Stream Service\": \"file\",\r\n    \"Task File\": \"file\",\r\n    \"Visio Document\": \"file\",\r\n    \"WFS\": \"file\",\r\n    \"WMS\": \"file\",\r\n    \"WMTS\": \"file\",\r\n    \"Windows Mobile Package\": \"file\",\r\n    \"Windows Viewer Add In\": \"file\",\r\n    \"Workflow Manager Service\": \"file\",\r\n    \"iWork Keynote\": \"file\",\r\n    \"iWork Numbers\": \"file\",\r\n    \"iWork Pages\": \"file\",\r\n    \"Form\": \"file\",\r\n    \"Workforce Project\": \"file\"\r\n};\r\n\r\nexport default {\r\n    ...fileTypes,\r\n    \"Web Map\": \"webmap\",\r\n    \"Web Mapping Application\": \"webapp\",\r\n    \"Web Scene\": \"webscene\",\r\n    \"Dashboard\": \"webapp\"\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_utilities/supportedItemTypes.ts","export const SHOW_IN_VIEWER = \"SHOW_IN_VIEWER\";\r\nexport const SHOW_FULLSCREEN = \"SHOW_FULLSCREEN\";\r\nexport const MOUSE_OVER = \"MOUSE_OVER\";\r\nexport const MOUSE_OUT = \"MOUSE_OUT\";\r\nexport const VIEWER_CHANGE = \"VIEWER_CHANGE\";\r\n\r\nexport const showInViewer = () => ({\r\n    type: SHOW_IN_VIEWER\r\n});\r\n\r\nexport const showFullscreen = () => ({\r\n    type: SHOW_FULLSCREEN\r\n});\r\n\r\nexport const mouseOver = () => ({\r\n    type: MOUSE_OVER\r\n});\r\n\r\nexport const mouseOut = () => ({\r\n    type: MOUSE_OUT\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Gallery/Panel/_actions/index.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dojo/promise/all\"\n// module id = 5\n// module chunks = 0","import Component from \"../../../../../Component\";\r\nimport { ViewState } from \"./_reducers\";\r\n\r\nexport { reducers } from \"./_reducers\";\r\n\r\nimport * as all from \"dojo/promise/all\";\r\nimport * as promiseUtils from \"esri/core/promiseUtils\";\r\nimport * as requireUtils from \"esri/core/requireUtils\";\r\n\r\ninterface ComponentState {\r\n    status: string;\r\n    loadText: string;\r\n}\r\n\r\nconst widgetKey = {\r\n    compassWidget: \"esri/widgets/Compass\",\r\n    homeWidget: \"esri/widgets/Home\",\r\n    legendWidget: \"esri/widgets/Legend\",\r\n    locateWidget: \"esri/widgets/Locate\",\r\n    searchWidget: \"esri/widgets/Search\"\r\n};\r\n\r\nexport default class ViewBase extends Component<ViewState, ComponentState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n\r\n        this.state = {\r\n            status: \"loading\",\r\n            loadText: \"scripts\"\r\n        };\r\n\r\n        this.loadScripts = this.loadScripts.bind(this);\r\n        this.loadMap = this.loadMap.bind(this);\r\n        this.loadWidgets = this.loadWidgets.bind(this);\r\n\r\n        this.loadScripts.bind(this)();\r\n    }\r\n\r\n    public render() {\r\n        const tsx = this.tsx;\r\n\r\n        if (this.state.status === \"loaded\") {\r\n            return <div />;\r\n        } else if (this.state.status === \"loading\") {\r\n            return (\r\n                <div>\r\n                    <div class=\"loader is-active padding-leader-3 padding-trailer-3 center-style\">\r\n                        <div class=\"loader-bars\" />\r\n                        <div class=\"loader-text\">{this.props.i18n.viewLoading[this.state.loadText]}</div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        return (\r\n            <div>\r\n                <h3 class=\"center-style\">{this.props.i18n.viewLoading.failed}</h3>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private loadScripts() {\r\n        requireUtils.when(window[\"require\"], [this.props.webModule, this.props.viewModule])\r\n            .then(\r\n                ([WebConstructor, ViewConstructor]) => {\r\n                    this.setState({ loadText: \"map\" });\r\n                    this.loadMap(WebConstructor, ViewConstructor);\r\n                },\r\n                (err) => {\r\n                    this.setState({ status: \"failed\" });\r\n                }\r\n            );\r\n    }\r\n\r\n    private loadMap(\r\n        WebConstructor: __esri.WebMapConstructor,\r\n        ViewConstructor: __esri.MapViewConstructor\r\n    ) {\r\n        let view: any;\r\n        const map: __esri.WebMap | __esri.WebScene = new WebConstructor({\r\n            portalItem: {\r\n                id: this.props.id\r\n            }\r\n        });\r\n        map.load().then(() => {\r\n            this.setState({ loadText: \"basemap\" });\r\n            return map.basemap.load();\r\n        }).then(() => {\r\n            this.setState({ loadText: \"layers\" });\r\n            const allLayers = map.allLayers;\r\n            const promises = allLayers.map((layer) => layer.load());\r\n            return all(promises.toArray());\r\n        }).then((layers) => {\r\n            this.setState({ loadText: \"widgets\" });\r\n            view = new ViewConstructor({\r\n                container: this.props.containerId,\r\n                map\r\n            });\r\n            return this.loadWidgets(view);\r\n        }).then(() => {\r\n            view.container = this.props.containerId;\r\n            this.setState({ status: \"loaded\" });\r\n        }).otherwise((err) => {\r\n            this.setState({ status: \"failed\" });\r\n        });\r\n    }\r\n\r\n    private loadWidgets(view: __esri.MapView) {\r\n        const positions = {\r\n            \"bottom-left\": true,\r\n            \"bottom-right\": true,\r\n            \"top-left\": true,\r\n            \"top-right\": true\r\n        };\r\n        const modules = Object.keys(this.props.widgets).reduce((p, c, i) => {\r\n            if (positions[this.props.widgets[c]]) {\r\n                p.push({\r\n                    module: widgetKey[c],\r\n                    position: this.props.widgets[c]\r\n                } as never); // typescript is weird\r\n            }\r\n            return p;\r\n        }, []);\r\n        return requireUtils.when(window[\"require\"], modules.map((item) => item[\"module\"]))\r\n            .then((constructors) => {\r\n                constructors.forEach((Constructor: any, i: number) => {\r\n                    const widget = new Constructor({ view });\r\n                    if (widget.activeLayerInfos) {\r\n                        widget.watch(\"activeLayerInfos.length\", () => {\r\n                            view.ui.add(widget, modules[i][\"position\"]);\r\n                        });\r\n                        return;\r\n                    }\r\n                    view.ui.add(widget, modules[i][\"position\"]);\r\n                });\r\n                return promiseUtils.resolve();\r\n            });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Viewer/View/ViewBase/index.tsx","import * as ApplicationBase from \"esriApplicationBase/ApplicationBase\";\nimport * as requireUtils from \"esri/core/requireUtils\";\n\nimport MainApp from \"./Widget\";\n\nexport = (applicationConfigJSON: string, boilerplateConfigJSON: string, i18n: any) => {\n    const boilerplate = new ApplicationBase({\n        config: JSON.parse(applicationConfigJSON),\n        settings: JSON.parse(boilerplateConfigJSON)\n    });\n    const MainComponent = new MainApp({ boilerplate, i18n });\n    MainComponent.container = \"viewDiv\";\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/index.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"esriApplicationBase/ApplicationBase\"\n// module id = 9\n// module chunks = 0","/// <amd-dependency path=\"esri/core/tsSupport/declareExtendsHelper\" name=\"__extends\" />\r\n/// <amd-dependency path=\"esri/core/tsSupport/decorateHelper\" name=\"__decorate\" />\r\n\r\nimport { subclass, declared, property } from \"esri/core/accessorSupport/decorators\";\r\nimport * as Widget from \"esri/widgets/Widget\";\r\nimport { renderable } from \"esri/widgets/support/widget\";\r\n\r\nimport MinimalGallery, { MinimalGalleryState, reducers } from \"./MinimalGallery\";\r\nimport { router, startHistoryListener } from \"./MinimalGallery/_utilities/router\";\r\nimport { newStore, middlewares } from \"../Component\";\r\n\r\ninterface MainAppProps {\r\n    boilerplate: __Component.Pojo;\r\n    i18n: __Component.Pojo;\r\n}\r\n\r\nconst { thunk, debug } = middlewares;\r\n\r\n@subclass(\"esri.widgets.MinimalGallery\")\r\nexport default class MainApp extends declared(Widget) {\r\n    minimalGallery: MinimalGallery;\r\n\r\n    constructor(props: MainAppProps) {\r\n        super();\r\n\r\n        this.minimalGallery = new MinimalGallery(\r\n            newStore({\r\n                reducers,\r\n                parentWidget: this,\r\n                initialState: {\r\n                    base: {\r\n                        applicationBase: props.boilerplate,\r\n                        applicationBaseResult: null,\r\n                        i18n: props.i18n,\r\n                        status: \"loading\",\r\n                        loadMessage: \"init\"\r\n                    }\r\n                },\r\n                middlewares: [ thunk, router ]\r\n            })\r\n        );\r\n\r\n        startHistoryListener(this.minimalGallery.store);\r\n    }\r\n\r\n    render() {\r\n        return this.minimalGallery.render();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/Widget.tsx","module.exports = __WEBPACK_EXTERNAL_MODULE_11__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"esri/core/accessorSupport/decorators\"\n// module id = 11\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"esri/widgets/Widget\"\n// module id = 12\n// module chunks = 0","import Component from \"../../Component\";\r\n\r\nimport { MinimalGalleryState } from \"./_reducers\";\r\nimport { loadApplicationBase } from \"./_actions\";\r\n\r\nimport Header from \"./Header\";\r\nimport Gallery from \"./Gallery\";\r\nimport Viewer from \"./Viewer\";\r\nimport Pager from \"./Pager\";\r\n\r\nexport { MinimalGalleryState, reducers } from \"./_reducers\";\r\n\r\ninterface ComponentState {\r\n    status: \"loading\" | \"loaded\" | \"failed\";\r\n    loadMessage: string;\r\n}\r\n\r\nexport default class MinimalGallery extends Component<MinimalGalleryState, ComponentState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n\r\n        this.state = {\r\n            status: \"loading\",\r\n            loadMessage: \"init\"\r\n        };\r\n\r\n        this.dispatch(loadApplicationBase());\r\n    }\r\n\r\n    public render() {\r\n        const tsx = this.tsx;\r\n        const i18n = this.props.base.i18n;\r\n        const status = this.props.base.status;\r\n\r\n        if (status === \"loading\") {\r\n            return (\r\n                <div>\r\n                    <div class=\"loader is-active padding-leader-3 padding-trailer-3 center-style\" key={\"loader\"}>\r\n                        <div class=\"loader-bars\" />\r\n                        <div bind={this} class=\"loader-text\">{i18n.appLoading[this.state.loadMessage]}</div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else if (status === \"success\") {\r\n            return (\r\n                <div>\r\n                    {\r\n                        this.props.base.applicationBaseResult.config.showHeader ?\r\n                            <Header key=\"minimal-gallery-header\" /> :\r\n                            null\r\n                    }\r\n                    <Gallery key=\"minimal-gallery\" />\r\n                    <Viewer key=\"minimal-gallery-viewer\" />\r\n                    <Pager key=\"minimal-gallery-pager\" />\r\n                </div>\r\n            );\r\n        }\r\n        return (\r\n            <div>\r\n                <h3 class=\"center-style\">{i18n.appLoading.failed}</h3>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/index.tsx","module.exports = __WEBPACK_EXTERNAL_MODULE_14__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"esri/widgets/support/widget\"\n// module id = 14\n// module chunks = 0","export const SAVE_APP_BASE_RESULT = \"SAVE_APP_BASE_RESULT\";\r\nexport const LOAD_APP_FAIL = \"LOAD_APP_FAIL\";\r\nexport const LOAD_APP_PROGRESS = \"LOAD_APP_PROGRESS\";\r\nexport const LOAD_APP_SUCCESS = \"LOAD_APP_FINISH\";\r\n\r\nimport * as all from \"dojo/promise/all\";\r\nimport * as Deferred from \"dojo/Deferred\";\r\nimport { updateItems, push, hashChange } from \".\";\r\nimport { MinimalGalleryState } from \"..\";\r\nimport supportedItemTypes from \"../_utilities/supportedItemTypes\";\r\n\r\nexport const loadApplicationBase = () => (dispatch: any, getState: () => MinimalGalleryState) => {\r\n    const { base } = getState();\r\n    base.applicationBase.load().then(\r\n        (result: __esriApplicationBase.ApplicationConfig) => dispatch(queryGroupItems(result)),\r\n        (err: any) => dispatch(loadAppFail(err)),\r\n        (progress: __Component.Pojo) => dispatch(loadAppProgress(progress))\r\n    );\r\n};\r\n\r\nconst queryGroupItems = (applicationBaseResult: __esriApplicationBase.ApplicationConfig) =>\r\n    (dispatch: any, getState: () => MinimalGalleryState) => {\r\n\r\n        // Boilerplate loaded properly so save it\r\n        dispatch(saveAppBaseResult(applicationBaseResult));\r\n\r\n        const state = getState();\r\n        const applicationBase = state.base.applicationBase;\r\n        const config = applicationBaseResult.config;\r\n        fetchAllGroupItems(applicationBase, config).then(\r\n            (response: any) => {\r\n                const promises = response.results.map((item: any) => item.load());\r\n                all(promises).then(\r\n                    (items: __Component.Pojo[]) => {\r\n                        const { hash } = state.router;\r\n\r\n                        dispatch(updateItems(items.filter((item: __Component.Pojo) => supportedItemTypes[item.type])));\r\n                        dispatch(hashChange(window.location.hash.slice(1)));\r\n                        dispatch(loadAppSuccess());\r\n                    },\r\n                    (err: any) => dispatch(loadAppFail(err))\r\n                );\r\n            },\r\n            (err: any) => dispatch(loadAppFail(err))\r\n        );\r\n    };\r\n\r\nconst fetchAllGroupItems = (applicationBase: MinimalGalleryState[\"base\"][\"applicationBase\"], config: any) => {\r\n    const dfd = new Deferred;\r\n\r\n    applicationBase.queryGroupItems(\r\n        config.group,\r\n        {\r\n            num: 100,\r\n            sortField: (config.sortField ? config.sortField : \"numviews\"),\r\n            sortOrder: (config.sortOrder ? config.sortOrder : \"desc\"),\r\n            start: 0\r\n        } as __esri.PortalQueryParams\r\n    ).then((response: any) => {\r\n        if (response.total > response.results.length) { // This group is more than 100 items, fetch them all!\r\n            const mappableArr = Array.apply(null, { length: Math.floor(response.total / 100) });\r\n            const promises = mappableArr.map((c: any, i: number) => (\r\n                applicationBase.queryGroupItems(\r\n                    config.group,\r\n                    {\r\n                        num: 100,\r\n                        sortField: (config.sortField ? config.sortField : \"numviews\"),\r\n                        sortOrder: (config.sortOtder ? config.sortOrder : \"desc\"),\r\n                        start:  100 + (i * 100)\r\n                    } as __esri.PortalQueryParams\r\n                )\r\n            ));\r\n            all(promises).then((responses: any) => {\r\n                const allItems = responses.reduce((p: any, c: any) => {\r\n                    p.results = p.results.concat(c.results);\r\n                    return p;\r\n                }, { results: response.results });\r\n                dfd.resolve(allItems);\r\n            }, (err: Error) => {\r\n                dfd.reject(err);\r\n            });\r\n        } else {\r\n            dfd.resolve(response);\r\n        }\r\n    }, (err: Error) => {\r\n        dfd.reject(err);\r\n    });\r\n\r\n    return dfd;\r\n};\r\n\r\nconst saveAppBaseResult = (applicationBaseResult: __esriApplicationBase.ApplicationConfig) => ({\r\n    type: SAVE_APP_BASE_RESULT,\r\n    payload: applicationBaseResult\r\n});\r\n\r\nconst loadAppFail = (err: any) => ({\r\n    type: LOAD_APP_FAIL,\r\n    payload: err\r\n});\r\n\r\nconst loadAppProgress = (progress: __Component.Pojo) => ({\r\n    type: LOAD_APP_PROGRESS,\r\n    payload: progress.status\r\n});\r\n\r\nconst loadAppSuccess = () => ({\r\n    type: LOAD_APP_SUCCESS\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_actions/base.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dojo/Deferred\"\n// module id = 16\n// module chunks = 0","export const UPDATE_ITEMS = \"UPDATE_ITEMS\";\r\nexport const FILTER_ITEMS = \"FILTER_ITEMS\";\r\n\r\nexport const updateItems = (items: __Component.Pojo[]) => ({\r\n    type: UPDATE_ITEMS,\r\n    payload: items\r\n});\r\n\r\nexport const filterItems = (filter: string) => ({\r\n    type: FILTER_ITEMS,\r\n    payload: filter\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_actions/items.ts","export const PUSH = \"ROUTER/PUSH\";\r\nexport const LOCATION_CHANGE = \"ROUTER/LOCATION_CHANGE\";\r\nexport const HASH_CHANGE = \"ROUTER/HASH_CHANGE\";\r\n\r\nimport { MinimalGalleryState } from \"..\";\r\n\r\nexport const push = (hash: string) => ({\r\n    type: PUSH,\r\n    payload: hash,\r\n});\r\n\r\nexport const hashChange = (hash: string) => ({\r\n    type: HASH_CHANGE,\r\n    payload: hash\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_actions/router.ts","import Component from \"../../Component\";\r\nimport { MinimalGalleryState } from \".\";\r\nimport { push } from \"./_actions\";\r\n\r\ninterface ComponentState {\r\n    searchTerm: string;\r\n}\r\n\r\nexport default class Header extends Component<MinimalGalleryState, ComponentState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n\r\n        this.state = {\r\n            searchTerm: this.props.filter\r\n        };\r\n\r\n        this.handleSearch = this.handleSearch.bind(this);\r\n        this.handleSearchChange = this.handleSearchChange.bind(this);\r\n    }\r\n\r\n    public render() {\r\n        const tsx = this.tsx;\r\n        const config = this.props.base.applicationBaseResult.config;\r\n\r\n        const headSearch = config.headerSearch ? (\r\n            <nav class=\"class-top-nav-list right\" role=\"navigation\" title=\"usernav\">\r\n                <form class=\"inline-block padding-leader-half\" role=\"search\" onsubmit={this.handleSearch}>\r\n                    <input\r\n                        title={config.searchPlaceholder}\r\n                        type=\"search\"\r\n                        placeholder={config.searchPlaceholder}\r\n                        name=\"q\"\r\n                        value={this.state.searchTerm}\r\n                        style=\"margin-top: -1px;\"\r\n                        oninput={this.handleSearchChange}\r\n                    />\r\n                    <button type=\"submit\" class=\"hide\">{config.searchPlaceholder}</button>\r\n                </form>\r\n            </nav>\r\n        ) : null;\r\n\r\n        const tabletHeadSearch = config.headerSearch ? (\r\n            <nav class=\"class-top-nav-list right\" role=\"navigation\" title=\"usernav\">\r\n                <form class=\"inline-block padding-leader-half\" role=\"search\" onsubmit={this.handleSearch}>\r\n                    <input\r\n                        title={config.searchPlaceholder}\r\n                        type=\"search\"\r\n                        placeholder={config.searchPlaceholder}\r\n                        name=\"q\"\r\n                        value={this.state.searchTerm}\r\n                        style=\"margin-top: -1px;\"\r\n                        oninput={this.handleSearchChange}\r\n                    />\r\n                    <button type=\"submit\" class=\"hide\">{config.searchPlaceholder}</button>\r\n                </form>\r\n            </nav>\r\n        ) : null;\r\n\r\n        const headImage = config.headerImage ? (\r\n            <img src={config.headerImageLocation} class=\"header-image\" alt={config.headerText} />\r\n        ) : null;\r\n\r\n        const agolLink = config.showAgolLink ? (\r\n            <a\r\n                class=\"top-nav-link\"\r\n                href={appendProtocol(config.agolLinkLocation.replace(\"${GROUP_ID}\", config.group))}\r\n                style={`color: ${config.headerTextColor}`}\r\n                title={config.agolLinkText}\r\n                target=\"_blank\"\r\n            >\r\n                {config.agolLinkText}\r\n            </a>\r\n        ) : null;\r\n\r\n        return (\r\n            <header class=\"top-nav fade-in\" style={`background-color: ${config.headColor}`}>\r\n                <div class=\"grid-container\">\r\n                    <div class=\"column-24\">\r\n                        <div class=\"tablet-hide\">\r\n                            <a href={appendProtocol(config.headerTextURL)} target=\"_blank\">\r\n                                {headImage}\r\n                                <a class=\"top-nav-title\" style={`color: ${config.headerTextColor}`}>\r\n                                    {config.headerText}\r\n                                </a>\r\n                            </a>\r\n                            {headSearch}\r\n                            {agolLink}\r\n                        </div>\r\n\r\n                        <div class=\"tablet-show top-nav-flex\">\r\n                            <header class=\"top-nav-flex-title\">\r\n                                <a href={appendProtocol(config.headerTextURL)}>\r\n                                    <a class=\"top-nav-title\" style={`color: ${config.headerTextColor}`}>\r\n                                        {config.headerText}\r\n                                    </a>\r\n                                </a>\r\n                                {tabletHeadSearch}\r\n                            </header>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </header>\r\n        );\r\n    }\r\n\r\n    public componentWillReceiveProps(nextProps: MinimalGalleryState) {\r\n        if (nextProps.filter !== this.state.searchTerm) {   // Set search term based on URL param\r\n            this.setState({ searchTerm: nextProps.filter });\r\n        }\r\n    }\r\n\r\n    private handleSearch(e?: Event) {\r\n        if (e) {\r\n            e.preventDefault();\r\n        }\r\n        const query = this.state.searchTerm.length > 0 ? `query=${this.state.searchTerm}` : \"\";\r\n        this.dispatch(push(`${query}`));\r\n    }\r\n\r\n    private handleSearchChange(e: any) {\r\n        this.setState({\r\n            searchTerm: e.target.value\r\n        });\r\n        if (e.target.value === \"\") {\r\n            this.handleSearch();\r\n        }\r\n    }\r\n}\r\n\r\nfunction appendProtocol(location: string) {\r\n    if (location.indexOf(\"http\") === 0) {\r\n        return location;\r\n    }\r\n    return `http://${location}`;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Header.tsx","import * as ioQuery from \"dojo/io-query\";\r\nimport Component, { middlewares } from \"../../../Component\";\r\nimport Panel, { PanelState, reducers } from \"./Panel\";\r\nimport { SHOW_IN_VIEWER, SHOW_FULLSCREEN, VIEWER_CHANGE } from \"./Panel/_actions\";\r\nimport { push } from \"../_actions\";\r\nimport { MinimalGalleryState } from \"..\";\r\nimport supportedItemTypes from \"../_utilities/supportedItemTypes\";\r\n\r\nconst { addListener } = middlewares;\r\n\r\ninterface ComponentState {\r\n    itemPages: __Component.Pojo[][];\r\n}\r\n\r\nexport default class Gallery extends Component<MinimalGalleryState, ComponentState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n\r\n        const itemsPerPage = this.props.base.applicationBaseResult.config.itemsPerPage;\r\n        this.state = {\r\n            itemPages: splitToPages(this.props.items.filteredItems, itemsPerPage)\r\n        };\r\n\r\n        this.mapItemsToChildren = this.mapItemsToChildren.bind(this);\r\n        this.handleChildUpdate = this.handleChildUpdate.bind(this);\r\n        this.showInViewer = this.showInViewer.bind(this);\r\n    }\r\n\r\n    public render() {\r\n        const tsx = this.tsx;\r\n\r\n        if (this.props.viewer.fullscreen) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <div class=\"grid-container leader-1\">\r\n                <div class=\"column-24\">\r\n                    <div class=\"block-group block-group-5-up tablet-block-group-3-up phone-block-group-1-up\">\r\n                        {this.mapItemsToChildren()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    public shouldComponentUpdate(nextProps: MinimalGalleryState) {\r\n        return nextProps.items.displayKey !== this.props.items.displayKey;\r\n    }\r\n\r\n    public componentWillReceiveProps(nextProps: MinimalGalleryState) {\r\n        if (nextProps.items.displayKey !== this.props.items.displayKey) {\r\n            const itemsPerPage = this.props.base.applicationBaseResult.config.itemsPerPage;\r\n            this.setState({\r\n                itemPages: splitToPages(nextProps.items.filteredItems, itemsPerPage)\r\n            });\r\n        }\r\n\r\n        if (nextProps.router.hash !== this.props.router.hash) {\r\n            const currentViewer = ioQuery.queryToObject(this.props.router.hash).viewer;\r\n            const nextViewer = ioQuery.queryToObject(nextProps.router.hash).viewer;\r\n            if (currentViewer !== nextViewer) {\r\n                for (let child in this.childComponents) {\r\n                    if (this.childComponents.hasOwnProperty(child)) {\r\n                        this.childComponents[child].store.dispatch({\r\n                            type: VIEWER_CHANGE,\r\n                            payload: nextViewer\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private mapItemsToChildren() {\r\n        const tsx = this.tsx;\r\n\r\n        const displayItems = this.state.itemPages[this.props.page - 1];\r\n\r\n        this.childComponents = displayItems.reduce((result: __Component.Pojo, item: __Component.Pojo) => {\r\n            if (this.childComponents[item.id]) {\r\n                result[item.id] = this.childComponents[item.id];\r\n            }\r\n            return result;\r\n        }, {});\r\n\r\n        return displayItems.map(\r\n            (item) => {\r\n                if (item.type === \"Dashboard\") {\r\n                    item.url = `${item.portal.url}/apps/opsdashboard/index.html#/${item.id}`;\r\n                }\r\n                return (\r\n                    <Panel\r\n                        key={item.id}\r\n                        store={{\r\n                            reducers,\r\n                            initialState: {\r\n                                applicationBaseResult: this.props.base.applicationBaseResult,\r\n                                i18n: this.props.base.i18n,\r\n                                item,\r\n                                itemType: supportedItemTypes[item.type]\r\n                            },\r\n                            middlewares: [ addListener(this.handleChildUpdate) ]\r\n                        }}\r\n                    />\r\n                );\r\n            }\r\n        );\r\n    }\r\n\r\n    private handleChildUpdate(action: { type: string, payload?: any }, childState: PanelState) {\r\n        switch (action.type) {\r\n            case SHOW_IN_VIEWER:\r\n                this.showInViewer(childState.item.id);\r\n                break;\r\n            case SHOW_FULLSCREEN:\r\n                this.showFullscreen(childState.item.id);\r\n                break;\r\n            default: //\r\n        }\r\n    }\r\n\r\n    private showInViewer(itemId: string) {\r\n        const { hash } = this.props.router;\r\n        const hashParams = ioQuery.queryToObject(hash);\r\n        hashParams.viewer = itemId;\r\n        this.dispatch(push(ioQuery.objectToQuery(hashParams)));\r\n    }\r\n\r\n    private showFullscreen(itemId: string) {\r\n        const { hash } = this.props.router;\r\n        const hashParams = ioQuery.queryToObject(hash);\r\n        hashParams.viewer = itemId;\r\n        hashParams.fullscreen = true;\r\n        this.dispatch(push(ioQuery.objectToQuery(hashParams)));\r\n    }\r\n}\r\n\r\nfunction splitToPages(items: __Component.Pojo, perPage: number) {\r\n    return items.reduce((result: __Component.Pojo[][], item: __Component.Pojo) => {\r\n        if (result[result.length - 1].length < perPage) {\r\n            result[result.length - 1].push(item);\r\n        } else {\r\n            result.push([item]);\r\n        }\r\n        return result;\r\n    }, [[]]);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Gallery/index.tsx","import Component from \"../../../../Component\";\r\nimport Caption from \"./Caption\";\r\n\r\nimport { showInViewer, showFullscreen, mouseOver, mouseOut } from \"./_actions\";\r\n\r\nimport { PanelState } from \"./_reducers\";\r\nexport { PanelState, reducers } from \"./_reducers\";\r\n\r\ninterface ComponentState {\r\n    panelType: string;\r\n    itemLink?: HTMLElement;\r\n}\r\n\r\nexport default class Panel extends Component<PanelState, ComponentState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n\r\n        this.state = {\r\n            panelType: this.props.getPanelType(this.props.item.type),\r\n        };\r\n\r\n        this.handleMouseOver = this.handleMouseOver.bind(this);\r\n        this.handleMouseOut = this.handleMouseOut.bind(this);\r\n        this.handleItemKeyPress = this.handleItemKeyPress.bind(this);\r\n        this.handleItemClick = this.handleItemClick.bind(this);\r\n        this.handleMaxKeyPress = this.handleMaxKeyPress.bind(this);\r\n        this.handleMaxClick = this.handleMaxClick.bind(this);\r\n        this.registerItemLink = this.registerItemLink.bind(this);\r\n    }\r\n\r\n    public render() {\r\n        const tsx = this.tsx;\r\n        const i18n = this.props.i18n;\r\n        const config = this.props.applicationBaseResult.config;\r\n\r\n        const author = config.showAuthor ? (\r\n            <p class=\"font-size--1 card-last hug-bottom author-text\" key={`${this.props.item.title}-author`}>\r\n                {this.props.item.owner}\r\n            </p>\r\n        ) : null;\r\n\r\n        let tooltipSnippet;\r\n        if (config.showSummaryTooltip) {\r\n            tooltipSnippet = this.props.item.snippet ? this.props.item.snippet : null;\r\n            if (tooltipSnippet && tooltipSnippet.length > config.tooltipTruncLength) {\r\n                tooltipSnippet = tooltipSnippet.slice(0, config.tooltipTruncLength) + \"...\";\r\n            }\r\n        }\r\n\r\n        let cardSnippet;\r\n        let summaryElement;\r\n        if (config.showItemSummary) {\r\n            cardSnippet = this.props.item.snippet ? this.props.item.snippet : null;\r\n            if (cardSnippet && cardSnippet.length > config.summaryTruncLength) {\r\n                cardSnippet = cardSnippet.slice(0, config.summaryTruncLength) + \"...\";\r\n            }\r\n            summaryElement = <p class=\"item-description-text\">{cardSnippet}</p>;\r\n        }\r\n\r\n        let itemPageLink;\r\n        if (config.showItemPageLink) {\r\n            itemPageLink = (\r\n                <a\r\n                    class=\"open-out-icon btn btn-transparent toolbar-tooltip\"\r\n                    aria-label={tooltipSnippet ? tooltipSnippet : i18n.ui.itemExtTip}\r\n                    href={`${this.props.applicationBaseResult.portal.url}/home/item.html?id=${this.props.item.id}`}\r\n                    style={`color: ${config.buttonBgColor}`}\r\n                    key={`${this.props.item.title}-info-icon`}\r\n                    tabindex=\"0\"\r\n                >\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        width=\"32\"\r\n                        height=\"32\"\r\n                        viewBox=\"0 0 32 32\"\r\n                        style={`\r\n                            fill: #0079c1;\r\n                            pointer-events: none;\r\n                            display: inline-block;\r\n                            width: 1em;\r\n                            height: 1em;\r\n                            vertical-align: -0.15em;\r\n                            padding-right: .15em;\r\n                        `}\r\n                    >\r\n                        <path\r\n                            d=\"M31.297 16.047c0 8.428-6.826 15.25-15.25 15.25S.797 24.475.797 16.047c0-8.424 6.826-15.25 15.25-15.25s15.25 6.826 15.25 15.25zM18 24V12h-4v12h-2v2h8v-2h-2zm0-18h-4v4h4V6z\"\r\n                        />\r\n                    </svg>\r\n                </a>\r\n            );\r\n        }\r\n\r\n        let maxLink;\r\n        if (this.props.itemType !== \"file\" && !config.alwaysOpenFullscreen) {\r\n            maxLink = (\r\n                <a\r\n                    class=\"open-out-icon btn btn-transparent toolbar-tooltip\"\r\n                    aria-label={i18n.ui[`${this.state.panelType}ExtTip`]}\r\n                    style={`color: ${config.buttonBgColor}`}\r\n                    key={`${this.props.item.title}-open-out-icon`}\r\n                    onclick={this.handleMaxClick}\r\n                    onkeypress={this.handleMaxKeyPress}\r\n                    tabindex=\"0\"\r\n                >\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        width=\"32\"\r\n                        height=\"32\"\r\n                        viewBox=\"0 0 32 32\"\r\n                        style={`\r\n                            fill: #0079c1;\r\n                            pointer-events: none;\r\n                            display: inline-block;\r\n                            width: 1em;\r\n                            height: 1em;\r\n                            vertical-align: -0.15em;\r\n                            padding-right: .15em;\r\n                        `}\r\n                    >\r\n                        <path d=\"M2 4v24h28V4H2zm26 22H4V10h24v16z\"/>\r\n                    </svg>\r\n                </a>\r\n            );\r\n        }\r\n\r\n        const mainTip = this.props.itemType === \"file\" ? i18n.ui.itemExtTip :\r\n            (config.alwaysOpenFullscreen ? i18n.ui[`${this.state.panelType}ExtTip`] : i18n.ui.galleryTip);\r\n\r\n        let title;\r\n        if (config.showItemTitle) {\r\n            title = (\r\n                <a\r\n                    title={mainTip}\r\n                    style={`color: ${config.linkColor}`}\r\n                    class=\"break-word\"\r\n                    onclick={this.handleItemClick}\r\n                    onkeypress={this.handleItemKeyPress}\r\n                >\r\n                    <h5 tabindex=\"0\" class=\"clickable\">\r\n                        {this.props.item.title}\r\n                    </h5>\r\n                </a>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div\r\n                class=\"card block trailer-1 animate-fade-in card-fade\"\r\n                style={`background-color: ${config.cardColor}; z-index: ${1000}`}\r\n                key={`${this.props.item.id}-div`}\r\n            >\r\n                <figure class=\"card-image-wrap\">\r\n                    <a\r\n                        title={mainTip}\r\n                        role=\"link\"\r\n                        tabindex=\"0\"\r\n                        onclick={this.handleItemClick}\r\n                        onkeypress={this.handleItemKeyPress}\r\n                        afterCreate={this.registerItemLink}\r\n                    >\r\n                        <img\r\n                            key={`${this.props.item.id}-thumbnail`}\r\n                            class=\"card-image clickable thumbnail-min\"\r\n                            src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\r\n                            alt={this.props.item.title}\r\n                            onmouseover={this.handleMouseOver}\r\n                            onmouseout={this.handleMouseOut}\r\n                            style={`\r\n                                background-image: url(${this.props.item.thumbnailUrl});\r\n                                background-repeat: no-repeat;\r\n                                background-size: cover;\r\n                            `}\r\n                        />\r\n                    </a>\r\n                    <Caption key=\"card-caption\" />\r\n                </figure>\r\n                <div class=\"card-content\" style={`color: ${config.fontColor}`}>\r\n                    {title}\r\n                    {summaryElement}\r\n                    {author}\r\n                    <div class=\"open-out-container\">\r\n                        {itemPageLink}\r\n                        {maxLink}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    public componentWillReceiveProps(nextProps: PanelState) {\r\n        if (\r\n            !nextProps.activeViewer &&\r\n            this.props.activeViewer &&\r\n            this.state.itemLink &&\r\n            this.props.activeViewer === this.props.item.id\r\n        ) {\r\n            this.state.itemLink.focus();\r\n        }\r\n    }\r\n\r\n    private registerItemLink(itemLink: HTMLElement) {\r\n        this.setState({ itemLink });\r\n    }\r\n\r\n    private handleMouseOver() {\r\n        this.dispatch(mouseOver());\r\n    }\r\n\r\n    private handleMouseOut() {\r\n        this.dispatch(mouseOut());\r\n    }\r\n\r\n    private handleItemKeyPress(e: KeyboardEvent) {\r\n        if (e.key === \"Enter\") {\r\n            this.handleItemClick();\r\n        }\r\n    }\r\n\r\n    private handleItemClick() {\r\n        if (this.props.itemType === \"file\") {\r\n            window.open(\r\n                `${this.props.applicationBaseResult.portal.url}/home/item.html?id=${this.props.item.id}`,\r\n                \"_blank\"\r\n            );\r\n        } else {\r\n            if (this.props.applicationBaseResult.config.alwaysOpenFullscreen) {\r\n                this.handleMaxClick();\r\n            } else {\r\n                this.dispatch(showInViewer());\r\n            }\r\n        }\r\n    }\r\n\r\n    private handleMaxKeyPress(e: KeyboardEvent) {\r\n        if (e.key === \"Enter\") {\r\n            this.handleMaxClick();\r\n        }\r\n    }\r\n\r\n    private handleMaxClick() {\r\n        if (this.props.applicationBaseResult.config.openFullscreenSeparateTab) {\r\n            if (this.props.itemType === \"webapp\") {\r\n                window.open(this.props.item.url, \"_blank\");\r\n            } else {\r\n                window.open(\r\n                    `${window.location.origin}${window.location.pathname}${window.location.search}#viewer=${this.props.item.id}&fullscreen=true`,\r\n                    \"_blank\"\r\n                );\r\n            }\r\n        } else {\r\n            if (this.props.itemType === \"webapp\") {\r\n                window.location.href = this.props.item.url;\r\n            } else {\r\n                this.dispatch(showFullscreen());\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Gallery/Panel/index.tsx","import Component from \"../../../../Component\";\r\nimport { PanelState } from \".\";\r\n\r\ninterface ComponentState {\r\n    captionBelowOpacity: number;\r\n    captionOpacity: number;\r\n    captionTransform: number;\r\n    panelType: string;\r\n}\r\n\r\nexport default class Caption extends Component<PanelState, ComponentState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n\r\n        this.state = {\r\n            captionBelowOpacity: 0.8,\r\n            captionOpacity: 1,\r\n            captionTransform: 0,\r\n            panelType: this.props.getPanelType(this.props.item.type)\r\n        };\r\n    }\r\n\r\n    public render() {\r\n        const tsx = this.tsx;\r\n        const config = this.props.applicationBaseResult.config;\r\n\r\n        if (config.showItemType) {\r\n            if (config.itemTypeBelowThumbnail) {\r\n                return (\r\n                    <div\r\n                        class=\"card-below-image-caption\"\r\n                        style={`\r\n                            opacity: ${this.state.captionBelowOpacity};\r\n                            background-color: ${convertHex(config[`${this.state.panelType}CaptionColor`], 80)};\r\n                            color: ${config.captionTextColor};\r\n                        `}\r\n                    >\r\n                        {this.props.item.displayName}\r\n                    </div>\r\n                );\r\n            } else {\r\n                return (\r\n                    <div\r\n                        class=\"card-image-caption\"\r\n                        style={`\r\n                            opacity: ${this.state.captionOpacity};\r\n                            transform: translate(0, ${this.state.captionTransform}%);\r\n                            background-color: ${convertHex(config[`${this.state.panelType}CaptionColor`], 80)};\r\n                            color: ${config.captionTextColor};\r\n                        `}\r\n                    >\r\n                        {this.props.item.displayName}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    public componentWillReceiveProps(nextProps: PanelState) {\r\n        if (nextProps.hovering !== this.props.hovering) {\r\n            this.setState({\r\n                captionBelowOpacity: nextProps.hovering ? 1 : 0.8,\r\n                captionOpacity: nextProps.hovering ? 0 : 1,\r\n                captionTransform: nextProps.hovering ? 100 : 0\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nfunction convertHex( hex: string, opacity: number ) {\r\n    hex = hex.replace(\"#\", \"\");\r\n    const r = parseInt(hex.substring(0, 2), 16);\r\n    const g = parseInt(hex.substring(2, 4), 16);\r\n    const b = parseInt(hex.substring(4, 6), 16);\r\n    const result = `rgba(${r},${g},${b},${opacity / 100})`;\r\n    return result;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Gallery/Panel/Caption.tsx","import { combineReducers } from \"../../../../../Component\";\r\nimport { SHOW_IN_VIEWER, MOUSE_OVER, MOUSE_OUT, VIEWER_CHANGE } from \"../_actions\";\r\n\r\nexport interface PanelState {\r\n    applicationBaseResult: __esriApplicationBase.ApplicationConfig;\r\n    i18n: __Component.Pojo;\r\n    item: __Component.Pojo;\r\n    hovering: boolean;\r\n    getPanelType: (itemType: string) => string;\r\n    itemType: string;\r\n    activeViewer?: string;\r\n}\r\n\r\nconst applicationBaseResult = (state: __esriApplicationBase.ApplicationConfig = {}) => state;\r\nconst i18n = (state: __Component.Pojo = {}) => state;\r\nconst item = (state: __Component.Pojo = {}) => state;\r\nconst itemType = (state: string = \"file\") => state;\r\n\r\nconst getPanelType = (\r\n    state: (itemType: string) => string = (type: string) => {\r\n        const recognizedTypes = {\r\n            \"Web Mapping Application\": \"app\",\r\n            \"Web Map\": \"map\",\r\n            \"Web Scene\": \"scene\",\r\n            \"Dashboard\": \"app\"\r\n        };\r\n        if (recognizedTypes[type]) { return recognizedTypes[type]; }\r\n        return \"file\";\r\n    }\r\n) => state;\r\n\r\nconst hovering = (state: boolean = false, action: { type: string, payload: any }) => {\r\n    switch (action.type) {\r\n        case MOUSE_OVER:\r\n            return true;\r\n        case MOUSE_OUT:\r\n            return false;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst activeViewer = (state: string, action: { type: string, payload: any }) => {\r\n    switch (action.type) {\r\n        case VIEWER_CHANGE:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const reducers = combineReducers({\r\n    applicationBaseResult,\r\n    i18n,\r\n    item,\r\n    hovering,\r\n    getPanelType,\r\n    itemType,\r\n    activeViewer\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Gallery/Panel/_reducers/index.ts","import * as ioQuery from \"dojo/io-query\";\r\nimport Component from \"../../../Component\";\r\nimport { push } from \"../_actions\";\r\n\r\nimport { MinimalGalleryState } from \"..\";\r\nimport { AppView, MapView, SceneView } from \"./View\";\r\nimport convertHex from \"../_utilities/convertHex\";\r\nimport supportedItemTypes from \"../_utilities/supportedItemTypes\";\r\n\r\ninterface ComponentState {\r\n    containerClasses: {\r\n        \"animate-fade-in\": boolean;\r\n        \"animate-fade-out\": boolean;\r\n    };\r\n    scrollY: number;\r\n}\r\n\r\nexport default class Viewer extends Component<MinimalGalleryState, ComponentState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n\r\n        this.state = {\r\n            containerClasses: {\r\n                \"animate-fade-in\": true,\r\n                \"animate-fade-out\": false\r\n            },\r\n            scrollY: 0\r\n        };\r\n\r\n        this.handleExitKeyPress = this.handleExitKeyPress.bind(this);\r\n        this.handleExitClick = this.handleExitClick.bind(this);\r\n        this.closeViewer = this.closeViewer.bind(this);\r\n    }\r\n\r\n    public render() {\r\n        const tsx = this.tsx;\r\n        const i18n = this.props.base.i18n;\r\n        const config = this.props.base.applicationBaseResult.config;\r\n        const item = this.props.items.viewerItem;\r\n\r\n        if (this.props.viewer.visible && !!item.id) {\r\n            const viewType = supportedItemTypes[item.type];\r\n            let view;\r\n            if (viewType === \"webmap\") {\r\n                view = <MapView key={item.id} />;\r\n            } else if (viewType === \"webscene\") {\r\n                view = <SceneView key={item.id} />;\r\n            } else if (viewType === \"webapp\") {\r\n                view = <AppView key={item.id} />;\r\n            } else {\r\n                return null;\r\n            }\r\n\r\n            if (this.props.viewer.fullscreen) {\r\n                return (\r\n                    <div id=\"map-container\" class=\"map-container fullscreen\" key={`map-container-fullscreen-${item.id}`}>\r\n                        {view}\r\n                    </div>\r\n                );\r\n            }\r\n            return (\r\n                <div\r\n                    id=\"view-container\"\r\n                    key=\"view-container\"\r\n                    classes={this.state.containerClasses}\r\n                    style={`background-color: ${convertHex(config.bgColor, 85)};`}\r\n                >\r\n                    <div id=\"map-container\" class=\"map-container\" key={`map-container-${item.id}`}>\r\n                        {view}\r\n                    </div>\r\n                    <button\r\n                        class=\"btn btn-clear view-exit-button clickable\"\r\n                        onclick={this.handleExitClick}\r\n                        onkeypress={this.handleExitKeyPress}\r\n                        title={i18n.ui.close}\r\n                        afterCreate={this.focus}\r\n                    >\r\n                        <span class=\"icon-ui-close view-exit-icon\" />\r\n                    </button>\r\n                </div>\r\n            );\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public componentWillReceiveProps(nextProps: MinimalGalleryState) {\r\n        if (!this.props.viewer.visible && nextProps.viewer.visible) {\r\n            this.setState({ scrollY: window.scrollY });\r\n        }\r\n        if (this.props.viewer.visible && !nextProps.viewer.visible) {\r\n            this.childComponents = {};\r\n        }\r\n    }\r\n\r\n    private focus(el: HTMLElement) {\r\n        setTimeout(() => {\r\n            el.focus();\r\n        }, 10);\r\n    }\r\n\r\n    private handleExitKeyPress(e: KeyboardEvent) {\r\n        if (e.key === \"Enter\") {\r\n            this.handleExitClick();\r\n        }\r\n    }\r\n\r\n    private handleExitClick() {\r\n        this.setState({\r\n            containerClasses: {\r\n                \"animate-fade-in\": false,\r\n                \"animate-fade-out\": true\r\n            }\r\n        });\r\n        setTimeout(() => {\r\n            this.closeViewer();\r\n            this.setState({\r\n                containerClasses: {\r\n                    \"animate-fade-in\": true,\r\n                    \"animate-fade-out\": false\r\n                }\r\n            });\r\n        }, 750);\r\n    }\r\n\r\n    private closeViewer() {\r\n        const { hash } = this.props.router;\r\n        const hashParams = ioQuery.queryToObject(hash);\r\n        delete hashParams.viewer;\r\n        this.dispatch(push(ioQuery.objectToQuery(hashParams)));\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Viewer/index.tsx","export { MapView } from \"./MapView\";\r\nexport { AppView } from \"./AppView\";\r\nexport { SceneView } from \"./SceneView\";\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Viewer/View/index.tsx","import Component from \"../../../../Component\";\r\nimport { MinimalGalleryState } from \"../..\";\r\n\r\nimport ViewBase, { reducers } from \"./ViewBase\";\r\n\r\nexport class MapView extends Component<MinimalGalleryState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n    }\r\n\r\n    render() {\r\n        const tsx = this.tsx;\r\n        const config = this.props.base.applicationBaseResult.config;\r\n\r\n        return (\r\n            <ViewBase\r\n                key=\"map-view\"\r\n                store={{\r\n                    reducers,\r\n                    initialState: {\r\n                        config,\r\n                        i18n: this.props.base.i18n,\r\n                        id: this.props.items.viewerItem.id,\r\n                        widgets: Object.keys(config)\r\n                            .filter((key: string) => key.indexOf(\"Widget\") !== -1)\r\n                            .reduce((result: __Component.Pojo, key: string) => {\r\n                                return { ...result, [key]: config[key] };\r\n                            }, {}),\r\n                        viewModule: \"esri/views/MapView\",\r\n                        webModule: \"esri/WebMap\",\r\n                        containerId: \"map-container\"\r\n                    }\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Viewer/View/MapView.tsx","/** All state params must be provided to view */\r\nexport interface ViewState {\r\n    config: __Component.Pojo;\r\n    i18n: __Component.Pojo;\r\n    id: string;\r\n    widgets: {\r\n        [propName: string]: string;\r\n    };\r\n    viewModule: string;\r\n    webModule: string;\r\n    containerId: string;\r\n}\r\n\r\nconst initialState = {\r\n    config: {},\r\n    i18n: {},\r\n    id: \"\",\r\n    widgets: {},\r\n    viewModule: \"\",\r\n    webModule: \"\",\r\n    containerId: \"map-container\"\r\n};\r\n\r\nexport const reducers = (state: ViewState = initialState, action: __Component.Action) => state;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Viewer/View/ViewBase/_reducers/index.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_28__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"esri/core/promiseUtils\"\n// module id = 28\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_29__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"esri/core/requireUtils\"\n// module id = 29\n// module chunks = 0","import Component from \"../../../../Component\";\r\nimport { MinimalGalleryState } from \"../..\";\r\n\r\nexport class AppView extends Component<MinimalGalleryState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n    }\r\n\r\n    render() {\r\n        const tsx = this.tsx;\r\n\r\n        return (\r\n            <iframe\r\n                src={this.props.items.viewerItem.url}\r\n                class=\"app-frame\"\r\n                id=\"embedded-mapping-application-iframe\"\r\n                name=\"nested-iframe\"\r\n            >\r\n                <h3 class=\"center-style\">{this.props.base.i18n.viewLoading.iframe}</h3>\r\n            </iframe>\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Viewer/View/AppView.tsx","import Component from \"../../../../Component\";\r\nimport { MinimalGalleryState } from \"../..\";\r\n\r\nimport ViewBase, { reducers } from \"./ViewBase\";\r\n\r\nexport class SceneView extends Component<MinimalGalleryState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n    }\r\n\r\n    render() {\r\n        const tsx = this.tsx;\r\n        const config = this.props.base.applicationBaseResult.config;\r\n\r\n        return (\r\n            <ViewBase\r\n                key=\"map-view\"\r\n                store={{\r\n                    reducers,\r\n                    initialState: {\r\n                        config,\r\n                        i18n: this.props.base.i18n,\r\n                        id: this.props.items.viewerItem.id,\r\n                        widgets: Object.keys(config)\r\n                            .filter((key: string) => key.indexOf(\"Widget\") !== -1)\r\n                            .reduce((result: __Component.Pojo, key: string) => {\r\n                                return { ...result, [key]: config[key] };\r\n                            }, {}),\r\n                        viewModule: \"esri/views/SceneView\",\r\n                        webModule: \"esri/WebScene\",\r\n                        containerId: \"map-container\"\r\n                    }\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Viewer/View/SceneView.tsx","export default (hex: string, opacity: number) => {\r\n    hex = hex.replace(\"#\", \"\");\r\n    const r = parseInt(hex.substring(0, 2), 16);\r\n    const g = parseInt(hex.substring(2, 4), 16);\r\n    const b = parseInt(hex.substring(4, 6), 16);\r\n    const result = `rgba(${r},${g},${b},${opacity / 100})`;\r\n    return result;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_utilities/convertHex.ts","import * as ioQuery from \"dojo/io-query\";\r\nimport Component from \"../../Component\";\r\nimport { MinimalGalleryState } from \".\";\r\nimport { push } from \"./_actions\";\r\n\r\nexport default class Pager extends Component<MinimalGalleryState> {\r\n    constructor(store: __Component.Store) {\r\n        super(store);\r\n\r\n        this.handleNext = this.handleNext.bind(this);\r\n        this.handlePrevious = this.handlePrevious.bind(this);\r\n        this.handlePageButton = this.handlePageButton.bind(this);\r\n        this.handlePage = this.handlePage.bind(this);\r\n    }\r\n\r\n    public render() {\r\n        const tsx = this.tsx;\r\n        const config = this.props.base.applicationBaseResult.config;\r\n        const displayItems = this.props.items.filteredItems;\r\n\r\n        const pages = Math.ceil(displayItems.length / config.itemsPerPage);\r\n\r\n        const prevButtonClasses = {\r\n            \"btn\": true,\r\n            \"btn-disabled\": this.props.page <= 1,\r\n            \"btn-transparent\": true\r\n        };\r\n\r\n        const nextButtonClasses = {\r\n            \"btn\": true,\r\n            \"btn-arrow\": true,\r\n            \"btn-disabled\": this.props.page >= pages,\r\n            \"btn-transparent\": true\r\n        };\r\n\r\n        const pageButtons = Array.apply(null, Array(pages)).map((v: any, i: number) => {\r\n            const isActive = this.props.page === i + 1;\r\n            return (\r\n                <a\r\n                    id={`page-${i + 1}-button`}\r\n                    title={`page-${i + 1}`}\r\n                    class={`btn${!isActive ? \" btn-transparent\" : \"\"}`}\r\n                    onclick={this.handlePageButton}\r\n                    role=\"link\"\r\n                    tabindex=\"0\"\r\n                    style={`\r\n                        color: ${isActive ? config.buttonTextColor : config.buttonBgColor};\r\n                        background-color: ${isActive ? config.buttonBgColor : null};\r\n                        border: ${isActive ? `1px solid ${config.buttonBgColor}` : \"none\"}\r\n                    `}\r\n                    key={`page-button-${i + 1}-${this.props.items.displayKey}`}\r\n                >\r\n                    {i + 1}\r\n                </a>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div class=\"text-center trailer-1 leader-1\" key=\"pager\">\r\n                <a\r\n                    id=\"previous\"\r\n                    title=\"previous\"\r\n                    classes={prevButtonClasses}\r\n                    role=\"link\"\r\n                    tabindex=\"0\"\r\n                    style={`color:${config.buttonBgColor};`}\r\n                    key=\"previous-button\"\r\n                    onclick={this.handlePrevious}\r\n                >\r\n                    Previous\r\n                </a>\r\n                    {pageButtons}\r\n                <a\r\n                    id=\"next\"\r\n                    title=\"next\"\r\n                    classes={nextButtonClasses}\r\n                    role=\"link\"\r\n                    tabindex=\"0\"\r\n                    style={`color:${config.buttonBgColor};`}\r\n                    key=\"next-button\"\r\n                    onclick={this.handleNext}\r\n                >\r\n                    Next\r\n                </a>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    private handleNext() {\r\n        this.handlePage(this.props.page + 1);\r\n    }\r\n\r\n    private handlePrevious() {\r\n        this.handlePage(this.props.page - 1);\r\n    }\r\n\r\n    private handlePageButton(e: any) {\r\n        this.handlePage(e.target.text);\r\n    }\r\n\r\n    private handlePage(page: number) {\r\n        const { hash } = this.props.router;\r\n        const hashParams = ioQuery.queryToObject(hash);\r\n        if (page > 1) {\r\n            hashParams.page = page;\r\n        } else {\r\n            if (hashParams.page) {\r\n                delete hashParams.page;\r\n            }\r\n        }\r\n        this.dispatch(push(ioQuery.objectToQuery(hashParams)));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/Pager.tsx","import { combineReducers } from \"../../../Component\";\r\n\r\nimport base, { BaseState } from \"./base\";\r\nimport items, { ItemsState } from \"./items\";\r\nimport router, { RouterState } from \"./router\";\r\nimport filter, { FilterState } from \"./filter\";\r\nimport page, { PageState } from \"./page\";\r\nimport viewer, { ViewerState } from \"./viewer\";\r\n\r\nexport interface MinimalGalleryState {\r\n    base: BaseState;\r\n    items: ItemsState;\r\n    router: RouterState;\r\n    filter: FilterState;\r\n    page: PageState;\r\n    viewer: ViewerState;\r\n}\r\n\r\nexport const reducers = combineReducers({\r\n    base,\r\n    items,\r\n    router,\r\n    filter,\r\n    page,\r\n    viewer\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_reducers/index.ts","import { MinimalGalleryState } from \".\";\r\nimport { SAVE_APP_BASE_RESULT, LOAD_APP_FAIL, LOAD_APP_PROGRESS, LOAD_APP_SUCCESS } from \"../_actions\";\r\n\r\nexport interface BaseState {\r\n    applicationBase: __esriApplicationBase.ApplicationBase;\r\n    applicationBaseResult: __esriApplicationBase.ApplicationConfig;\r\n    i18n: __Component.Pojo;\r\n    status: string;\r\n    loadMessage: string;\r\n}\r\n\r\nexport default (state: MinimalGalleryState[\"base\"], action: { type: string, payload: any }): MinimalGalleryState[\"base\"] => {\r\n    switch (action.type) {\r\n        case SAVE_APP_BASE_RESULT:\r\n            const perPage = parseInt(action.payload.config.itemsPerPage, 10);\r\n            return {\r\n                ...state,\r\n                loadMessage: \"groupItems\",\r\n                applicationBaseResult: {\r\n                    ...action.payload,\r\n                    config: {\r\n                        ...action.payload.config,\r\n                        itemsPerPage: !isNaN(perPage) && perPage > 0 ? perPage : 20\r\n                    }\r\n                }\r\n            };\r\n        case LOAD_APP_FAIL:\r\n            return {\r\n                ...state,\r\n                status: \"failed\"\r\n            };\r\n        case LOAD_APP_PROGRESS:\r\n            return {\r\n                ...state,\r\n                loadMessage: action.payload\r\n            };\r\n        case LOAD_APP_SUCCESS:\r\n            return {\r\n                ...state,\r\n                status: \"success\"\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_reducers/base.ts","import * as ioQuery from \"dojo/io-query\";\r\nimport { UPDATE_ITEMS, FILTER_ITEMS, HASH_CHANGE } from \"../_actions\";\r\n\r\nexport interface ItemsState {\r\n    allItems: __Component.Pojo[];\r\n    filteredItems: __Component.Pojo[];\r\n    displayKey: string;\r\n    viewerItem: __Component.Pojo;\r\n} \r\n\r\nconst initialState: ItemsState = {\r\n    allItems: [],\r\n    filteredItems: [],\r\n    displayKey: \"\",\r\n    viewerItem: {}\r\n};\r\n\r\nexport default (state: ItemsState = initialState, action: { type: string, payload: any }): ItemsState => {\r\n    switch (action.type) {\r\n        case UPDATE_ITEMS:\r\n            return {\r\n                ...state,\r\n                allItems: action.payload\r\n            };\r\n        case HASH_CHANGE:\r\n            const hashParams = ioQuery.queryToObject(action.payload);\r\n            if (hashParams.viewer) {\r\n                const viewerItem = state.allItems.filter((item) => item.id === hashParams.viewer)[0];\r\n                return {\r\n                    ...state,\r\n                    viewerItem: viewerItem ? viewerItem : {},\r\n                    filteredItems: filterItems(state.allItems, hashParams.query ? hashParams.query : \"\"),\r\n                    displayKey: Math.random().toString(36).substring(7)\r\n                };\r\n            }\r\n            return {\r\n                ...state,\r\n                filteredItems: filterItems(state.allItems, hashParams.query ? hashParams.query : \"\"),\r\n                displayKey: Math.random().toString(36).substring(7)\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nfunction filterItems(items: __Component.Pojo[], filter: string) {\r\n    return items.filter((item: __Component.Pojo) => (\r\n        item.title.toLowerCase().indexOf(filter) !== -1 ||\r\n        item.type.toLowerCase().indexOf(filter) !== -1 ||\r\n        item.owner.toLowerCase().indexOf(filter) !== -1 ||\r\n        (item.tags && item.tags.map((tag: string) => tag.toLowerCase()).indexOf(filter) !== -1) ||\r\n        (item.description && item.description.indexOf(filter) !== -1) ||\r\n        (item.snippet && item.snippet.indexOf(filter) !== -1)\r\n    ));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_reducers/items.ts","import { HASH_CHANGE } from \"../_actions\";\r\n\r\nexport interface RouterState {\r\n    hash: string;\r\n}\r\n\r\nconst initialState = {\r\n    hash: \"\"\r\n};\r\n\r\nexport default (state: RouterState = initialState, action: __Component.Action) => {\r\n    switch (action.type) {\r\n        case HASH_CHANGE:\r\n            return {\r\n                ...state,\r\n                hash: action.payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_reducers/router.ts","import * as ioQuery from \"dojo/io-query\";\r\nimport { HASH_CHANGE } from \"../_actions\";\r\n\r\nexport type FilterState = string;\r\n\r\nexport default (state: FilterState = \"\", action: __Component.Action): FilterState => {\r\n    switch (action.type) {\r\n        case HASH_CHANGE:\r\n            const hashParams = ioQuery.queryToObject(action.payload);\r\n            return (hashParams.query ? hashParams.query : \"\");\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_reducers/filter.ts","import * as ioQuery from \"dojo/io-query\";\r\nimport { HASH_CHANGE } from \"../_actions\";\r\n\r\nexport type PageState = number;\r\n\r\nexport default (state: PageState = 1, action: __Component.Action): PageState => {\r\n    switch (action.type) {\r\n        case HASH_CHANGE:\r\n            const hashParams = ioQuery.queryToObject(action.payload);\r\n            if (hashParams.page) {\r\n                return parseInt(hashParams.page, 10);\r\n            }\r\n            return 1;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_reducers/page.ts","import * as ioQuery from \"dojo/io-query\";\r\nimport { HASH_CHANGE } from \"../_actions\";\r\n\r\nexport interface ViewerState {\r\n    visible: boolean;\r\n    fullscreen: boolean; \r\n}\r\n\r\nconst initialState: ViewerState = {\r\n    visible: false,\r\n    fullscreen: false\r\n};\r\n\r\nexport default (state: ViewerState = initialState, action: __Component.Action) => {\r\n    switch (action.type) {\r\n        case HASH_CHANGE:\r\n            const hashParams = ioQuery.queryToObject(action.payload);\r\n            if (hashParams.viewer) {\r\n                return {\r\n                    ...state,\r\n                    visible: true,\r\n                    fullscreen: !!hashParams.fullscreen\r\n                };\r\n            }\r\n            return {\r\n                ...state,\r\n                visible: false,\r\n                fullscreen: false\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_reducers/viewer.ts","import { PUSH, hashChange } from \"../_actions\";\r\n\r\nexport const router = () => (next: any) => (action: any) => {\r\n    switch (action.type) {\r\n        case PUSH:\r\n            window.location.hash = action.payload;\r\n            break;\r\n        default:\r\n            return next(action);\r\n    }\r\n};\r\n\r\nexport function startHistoryListener(store: __Component.Store) {\r\n    store.dispatch(hashChange(window.location.hash.slice(1)));\r\n\r\n    window.onhashchange = (event: any) => {\r\n        store.dispatch(hashChange(window.location.hash.slice(1)));\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mainApp/MinimalGallery/_utilities/router.ts"],"sourceRoot":""}